
> juliana-miranda-concept@0.0.0 lint
> eslint . --format json

[{"filePath":"C:\\Dev\\workspace\\eslint.config.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Dev\\workspace\\functions\\lib\\index.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Dev\\workspace\\functions\\src\\index.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":61,"column":78,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":61,"endColumn":81,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2993,2996],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2993,2996],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":155,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":155,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6730,6733],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6730,6733],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { onDocumentUpdated } from 'firebase-functions/v2/firestore';\r\nimport { onCall, HttpsError } from 'firebase-functions/v2/https';\r\nimport { setGlobalOptions } from 'firebase-functions/v2';\r\nimport * as admin from 'firebase-admin';\r\nimport sgMail from '@sendgrid/mail';\r\nimport axios from 'axios';\r\n\r\n// Configura├º├Áes globais\r\nsetGlobalOptions({ region: 'southamerica-east1' });\r\n\r\nadmin.initializeApp();\r\n\r\n// Configura├º├Áes das APIs (Devem ser configuradas no Firebase Console)\r\n// Nota: Em v2, recomenda-se o uso de Secrets Manager para chaves de API\r\nconst SENDGRID_API_KEY = process.env.SENDGRID_KEY || '';\r\nconst WHATSAPP_TOKEN = process.env.WHATSAPP_TOKEN || '';\r\nconst WHATSAPP_PHONE_NUMBER_ID = process.env.WHATSAPP_PHONE_NUMBER_ID || '';\r\n\r\nif (SENDGRID_API_KEY) {\r\n    sgMail.setApiKey(SENDGRID_API_KEY);\r\n}\r\n\r\n/**\r\n * Notifica├º├úo de confirma├º├úo de agendamento\r\n */\r\nexport const onAppointmentUpdate = onDocumentUpdated('appointments/{appointmentId}', async (event) => {\r\n    const newData = event.data?.after.data();\r\n    const oldData = event.data?.before.data();\r\n\r\n    if (!newData || !oldData) return;\r\n\r\n    // S├│ envia se o status mudou para 'confirmed'\r\n    if (newData.status === 'confirmed' && oldData.status !== 'confirmed') {\r\n        const { clientName, clientId, date, time, services, totalValue } = newData;\r\n\r\n        try {\r\n            // 1. Buscar telefone e email do cliente no Firestore\r\n            const clientDoc = await admin.firestore().collection('clients').doc(clientId).get();\r\n            const clientData = clientDoc.data();\r\n\r\n            if (!clientData) return;\r\n\r\n            const clientEmail = clientData.email;\r\n            const clientPhone = clientData.phone?.replace(/\\D/g, '');\r\n            const dateFormatted = new Date(date).toLocaleDateString('pt-BR');\r\n\r\n            // --- LOGICA DE E-MAIL (SENDGRID) ---\r\n            if (clientEmail && SENDGRID_API_KEY) {\r\n                const msg = {\r\n                    to: clientEmail,\r\n                    from: 'contato@julianamirandaconcept.com.br',\r\n                    subject: 'Confirma├º├úo de Agendamento - Juliana Miranda Concept',\r\n                    text: `Ol├í ${clientName}! Seu agendamento para o dia ${dateFormatted} ├ás ${time} foi confirmado. Valor: R$ ${totalValue.toFixed(2)}. Te esperamos!`,\r\n                    html: `\r\n                        <div style=\"font-family: sans-serif; max-width: 600px; margin: auto; border: 1px solid #eee; padding: 20px; border-radius: 10px;\">\r\n                            <h2 style=\"color: #e91e63;\">Ol├í ${clientName}! Ô£¿</h2>\r\n                            <p>Sua beleza tem hora marcada no <strong>Juliana Miranda Concept</strong>.</p>\r\n                            <hr style=\"border: 0; border-top: 1px solid #eee;\">\r\n                            <p><strong>Data:</strong> ${dateFormatted}</p>\r\n                            <p><strong>Hor├írio:</strong> ${time}</p>\r\n                            <p><strong>Servi├ºos:</strong> ${services.map((s: any) => s.name).join(', ')}</p>\r\n                            <p><strong>Total:</strong> R$ ${totalValue.toFixed(2)}</p>\r\n                            <hr style=\"border: 0; border-top: 1px solid #eee;\">\r\n                            <p style=\"font-size: 12px; color: #888;\">Este ├® um e-mail autom├ítico. Caso precise cancelar, entre em contato conosco.</p>\r\n                        </div>\r\n                    `,\r\n                };\r\n                await sgMail.send(msg);\r\n                console.log(`Email enviado para ${clientEmail}`);\r\n            }\r\n\r\n            // --- LOGICA DE WHATSAPP (CLOUD API) ---\r\n            if (clientPhone && WHATSAPP_TOKEN && WHATSAPP_PHONE_NUMBER_ID) {\r\n                const waPhone = clientPhone.length === 11 || clientPhone.length === 10 ? `55${clientPhone}` : clientPhone;\r\n\r\n                await axios.post(\r\n                    `https://graph.facebook.com/v18.0/${WHATSAPP_PHONE_NUMBER_ID}/messages`,\r\n                    {\r\n                        messaging_product: 'whatsapp',\r\n                        to: waPhone,\r\n                        type: 'template',\r\n                        template: {\r\n                            name: 'confirmacao_agendamento',\r\n                            language: { code: 'pt_BR' },\r\n                            components: [\r\n                                {\r\n                                    type: 'body',\r\n                                    parameters: [\r\n                                        { type: 'text', text: clientName },\r\n                                        { type: 'text', text: dateFormatted },\r\n                                        { type: 'text', text: time }\r\n                                    ]\r\n                                }\r\n                            ]\r\n                        }\r\n                    },\r\n                    {\r\n                        headers: {\r\n                            Authorization: `Bearer ${WHATSAPP_TOKEN}`,\r\n                            'Content-Type': 'application/json'\r\n                        }\r\n                    }\r\n                );\r\n                console.log(`WhatsApp enviado para ${waPhone}`);\r\n            }\r\n\r\n        } catch (error) {\r\n            console.error('Erro ao processar notifica├º├Áes:', error);\r\n        }\r\n    }\r\n});\r\n\r\n/**\r\n * Cria├º├úo de usu├írio administrativo\r\n */\r\nexport const createUserAuth = onCall(async (request) => {\r\n    const { data, auth } = request;\r\n\r\n    if (!auth) {\r\n        throw new HttpsError('unauthenticated', 'Apenas usu├írios autenticados podem criar outros usu├írios.');\r\n    }\r\n\r\n    const { email, password, name, role } = data;\r\n\r\n    if (!email || !password || !name) {\r\n        throw new HttpsError('invalid-argument', 'E-mail, senha e nome s├úo obrigat├│rios.');\r\n    }\r\n\r\n    try {\r\n        // 1. Check if the requester is admin\r\n        const requesterDoc = await admin.firestore().collection('users').doc(auth.uid).get();\r\n        const requesterData = requesterDoc.data();\r\n\r\n        if (!requesterData || requesterData.role !== 'admin') {\r\n            throw new HttpsError('permission-denied', 'Apenas administradores podem criar novos usu├írios.');\r\n        }\r\n\r\n        // 2. Create the user in Firebase Auth\r\n        const userRecord = await admin.auth().createUser({\r\n            email,\r\n            password,\r\n            displayName: name,\r\n        });\r\n\r\n        // 3. Create the profile in Firestore\r\n        await admin.firestore().collection('users').doc(userRecord.uid).set({\r\n            name,\r\n            email,\r\n            role: role || 'employee',\r\n            active: true,\r\n            createdAt: new Date().toISOString()\r\n        });\r\n\r\n        return { success: true, uid: userRecord.uid };\r\n    } catch (error: any) {\r\n        console.error('Erro ao criar usu├írio:', error);\r\n        if (error instanceof HttpsError) {\r\n            throw error;\r\n        }\r\n        throw new HttpsError('internal', error.message || 'Erro interno ao criar usu├írio');\r\n    }\r\n});\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Dev\\workspace\\src\\App.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Dev\\workspace\\src\\components\\ClientForm.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'error' is defined but never used.","line":45,"column":26,"nodeType":"Identifier","messageId":"unusedVar","endLine":45,"endColumn":31},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has missing dependencies: 'formData' and 'setFormData'. Either include them or remove the dependency array. If 'setFormData' changes too often, find the parent component that defines it and wrap that definition in useCallback.","line":53,"column":8,"nodeType":"ArrayExpression","endLine":53,"endColumn":26,"suggestions":[{"desc":"Update the dependencies array to be: [formData, formData.zipCode, setFormData]","fix":{"range":[1833,1851],"text":"[formData, formData.zipCode, setFormData]"}}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { X, Loader2 } from 'lucide-react';\r\nimport { useEffect, useState } from 'react';\r\nimport type { ClientFormData } from '../types';\r\nimport { formatCPF, formatCNPJ, formatPhone, formatCEP } from '../utils/format';\r\nimport { fetchAddressByCEP } from '../utils/viacep';\r\nimport { toast } from 'sonner';\r\n\r\ninterface ClientFormProps {\r\n    formData: ClientFormData;\r\n    setFormData: (data: ClientFormData) => void;\r\n    onSubmit: (e: React.FormEvent) => void;\r\n    onCancel: () => void;\r\n    editingClient: string | null;\r\n}\r\n\r\nexport function ClientForm({\r\n    formData,\r\n    setFormData,\r\n    onSubmit,\r\n    onCancel,\r\n    editingClient,\r\n}: ClientFormProps) {\r\n    const [isLoadingCEP, setIsLoadingCEP] = useState(false);\r\n\r\n    useEffect(() => {\r\n        const cleanCEP = formData.zipCode?.replace(/\\D/g, '') || '';\r\n\r\n        if (cleanCEP.length === 8) {\r\n            const lookupCEP = async () => {\r\n                setIsLoadingCEP(true);\r\n                try {\r\n                    const data = await fetchAddressByCEP(cleanCEP);\r\n                    if (data) {\r\n                        setFormData({\r\n                            ...formData,\r\n                            address: data.logradouro,\r\n                            neighborhood: data.bairro,\r\n                            city: data.localidade,\r\n                            state: data.uf\r\n                        });\r\n                        toast.success('Endere├ºo preenchido automaticamente.');\r\n                    } else {\r\n                        toast.error('CEP n├úo encontrado.');\r\n                    }\r\n                } catch (error) {\r\n                    toast.error('Erro ao buscar o CEP.');\r\n                } finally {\r\n                    setIsLoadingCEP(false);\r\n                }\r\n            };\r\n            lookupCEP();\r\n        }\r\n    }, [formData.zipCode]);\r\n\r\n    const estados = [\r\n        'AC', 'AL', 'AP', 'AM', 'BA', 'CE', 'DF', 'ES', 'GO', 'MA', 'MT', 'MS', 'MG',\r\n        'PA', 'PB', 'PR', 'PE', 'PI', 'RJ', 'RN', 'RS', 'RO', 'RR', 'SC', 'SP', 'SE', 'TO'\r\n    ];\r\n\r\n    return (\r\n        <div className=\"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4 overflow-y-auto\">\r\n            <div className=\"bg-white rounded-2xl shadow-2xl w-full max-w-4xl my-8\">\r\n                <div className=\"p-6 border-b border-gray-100 flex justify-between items-center sticky top-0 bg-white z-10 rounded-t-2xl\">\r\n                    <h2 className=\"text-xl font-semibold text-gray-900\">\r\n                        {editingClient ? 'Editar Cliente' : 'Novo Cliente'}\r\n                    </h2>\r\n                    <button onClick={onCancel} className=\"text-gray-400 hover:text-gray-600\">\r\n                        <X className=\"w-6 h-6\" />\r\n                    </button>\r\n                </div>\r\n\r\n                <form onSubmit={onSubmit} className=\"p-6 space-y-6 max-h-[70vh] overflow-y-auto\">\r\n                    {/* Informa├º├Áes B├ísicas */}\r\n                    <div>\r\n                        <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">Informa├º├Áes B├ísicas</h3>\r\n                        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n                            <div className=\"md:col-span-2\">\r\n                                <label className=\"block text-sm font-medium text-gray-700 mb-1\">Nome Completo *</label>\r\n                                <input\r\n                                    type=\"text\"\r\n                                    placeholder=\"Nome do cliente\"\r\n                                    value={formData.name}\r\n                                    onChange={(e) => setFormData({ ...formData, name: e.target.value })}\r\n                                    className=\"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-pink-500 focus:border-transparent outline-none\"\r\n                                    required\r\n                                />\r\n                            </div>\r\n\r\n                            <div>\r\n                                <label className=\"block text-sm font-medium text-gray-700 mb-1\">CPF</label>\r\n                                <input\r\n                                    type=\"text\"\r\n                                    placeholder=\"000.000.000-00\"\r\n                                    value={formData.cpf || ''}\r\n                                    onChange={(e) => setFormData({ ...formData, cpf: formatCPF(e.target.value) })}\r\n                                    className=\"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-pink-500 focus:border-transparent outline-none\"\r\n                                />\r\n                            </div>\r\n\r\n                            <div>\r\n                                <label className=\"block text-sm font-medium text-gray-700 mb-1\">CNPJ</label>\r\n                                <input\r\n                                    type=\"text\"\r\n                                    placeholder=\"00.000.000/0000-00\"\r\n                                    value={formData.cnpj || ''}\r\n                                    onChange={(e) => setFormData({ ...formData, cnpj: formatCNPJ(e.target.value) })}\r\n                                    className=\"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-pink-500 focus:border-transparent outline-none\"\r\n                                />\r\n                            </div>\r\n\r\n                            {formData.cnpj && (\r\n                                <div className=\"md:col-span-2\">\r\n                                    <label className=\"block text-sm font-medium text-gray-700 mb-1\">Raz├úo Social</label>\r\n                                    <input\r\n                                        type=\"text\"\r\n                                        placeholder=\"Nome da empresa\"\r\n                                        value={formData.companyName || ''}\r\n                                        onChange={(e) => setFormData({ ...formData, companyName: e.target.value })}\r\n                                        className=\"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-pink-500 focus:border-transparent outline-none\"\r\n                                    />\r\n                                </div>\r\n                            )}\r\n\r\n                            <div>\r\n                                <label className=\"block text-sm font-medium text-gray-700 mb-1\">Telefone *</label>\r\n                                <input\r\n                                    type=\"tel\"\r\n                                    placeholder=\"(00) 00000-0000\"\r\n                                    value={formData.phone}\r\n                                    onChange={(e) => setFormData({ ...formData, phone: formatPhone(e.target.value) })}\r\n                                    className=\"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-pink-500 focus:border-transparent outline-none\"\r\n                                    required\r\n                                />\r\n                            </div>\r\n\r\n                            <div>\r\n                                <label className=\"block text-sm font-medium text-gray-700 mb-1\">E-mail</label>\r\n                                <input\r\n                                    type=\"email\"\r\n                                    placeholder=\"email@exemplo.com\"\r\n                                    value={formData.email || ''}\r\n                                    onChange={(e) => setFormData({ ...formData, email: e.target.value })}\r\n                                    className=\"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-pink-500 focus:border-transparent outline-none\"\r\n                                />\r\n                            </div>\r\n\r\n                            <div>\r\n                                <label className=\"block text-sm font-medium text-gray-700 mb-1\">Data de Nascimento</label>\r\n                                <input\r\n                                    type=\"date\"\r\n                                    value={formData.birthDate || ''}\r\n                                    onChange={(e) => setFormData({ ...formData, birthDate: e.target.value })}\r\n                                    className=\"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-pink-500 focus:border-transparent outline-none\"\r\n                                />\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* Endere├ºo Completo */}\r\n                    <div>\r\n                        <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">Endere├ºo (para NFS-e)</h3>\r\n                        <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\r\n                            <div className=\"relative\">\r\n                                <label className=\"block text-sm font-medium text-gray-700 mb-1\">CEP</label>\r\n                                <div className=\"relative\">\r\n                                    <input\r\n                                        type=\"text\"\r\n                                        placeholder=\"00000-000\"\r\n                                        value={formData.zipCode || ''}\r\n                                        onChange={(e) => setFormData({ ...formData, zipCode: formatCEP(e.target.value) })}\r\n                                        className=\"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-pink-500 focus:border-transparent outline-none\"\r\n                                    />\r\n                                    {isLoadingCEP && (\r\n                                        <div className=\"absolute right-3 top-1/2 -translate-y-1/2\">\r\n                                            <Loader2 className=\"w-5 h-5 text-pink-500 animate-spin\" />\r\n                                        </div>\r\n                                    )}\r\n                                </div>\r\n                            </div>\r\n\r\n                            <div className=\"md:col-span-2\">\r\n                                <label className=\"block text-sm font-medium text-gray-700 mb-1\">Logradouro</label>\r\n                                <input\r\n                                    type=\"text\"\r\n                                    placeholder=\"Rua, Avenida...\"\r\n                                    value={formData.address || ''}\r\n                                    onChange={(e) => setFormData({ ...formData, address: e.target.value })}\r\n                                    className=\"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-pink-500 focus:border-transparent outline-none\"\r\n                                />\r\n                            </div>\r\n\r\n                            <div>\r\n                                <label className=\"block text-sm font-medium text-gray-700 mb-1\">N├║mero</label>\r\n                                <input\r\n                                    type=\"text\"\r\n                                    placeholder=\"N┬║\"\r\n                                    value={formData.addressNumber || ''}\r\n                                    onChange={(e) => setFormData({ ...formData, addressNumber: e.target.value })}\r\n                                    className=\"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-pink-500 focus:border-transparent outline-none\"\r\n                                />\r\n                            </div>\r\n\r\n                            <div className=\"md:col-span-2\">\r\n                                <label className=\"block text-sm font-medium text-gray-700 mb-1\">Complemento</label>\r\n                                <input\r\n                                    type=\"text\"\r\n                                    placeholder=\"Apto, Bloco, Sala...\"\r\n                                    value={formData.complement || ''}\r\n                                    onChange={(e) => setFormData({ ...formData, complement: e.target.value })}\r\n                                    className=\"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-pink-500 focus:border-transparent outline-none\"\r\n                                />\r\n                            </div>\r\n\r\n                            <div className=\"md:col-span-2\">\r\n                                <label className=\"block text-sm font-medium text-gray-700 mb-1\">Bairro</label>\r\n                                <input\r\n                                    type=\"text\"\r\n                                    placeholder=\"Bairro\"\r\n                                    value={formData.neighborhood || ''}\r\n                                    onChange={(e) => setFormData({ ...formData, neighborhood: e.target.value })}\r\n                                    className=\"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-pink-500 focus:border-transparent outline-none\"\r\n                                />\r\n                            </div>\r\n\r\n                            <div>\r\n                                <label className=\"block text-sm font-medium text-gray-700 mb-1\">Cidade</label>\r\n                                <input\r\n                                    type=\"text\"\r\n                                    placeholder=\"Cidade\"\r\n                                    value={formData.city || ''}\r\n                                    onChange={(e) => setFormData({ ...formData, city: e.target.value })}\r\n                                    className=\"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-pink-500 focus:border-transparent outline-none\"\r\n                                />\r\n                            </div>\r\n\r\n                            <div>\r\n                                <label className=\"block text-sm font-medium text-gray-700 mb-1\">Estado</label>\r\n                                <select\r\n                                    value={formData.state || ''}\r\n                                    onChange={(e) => setFormData({ ...formData, state: e.target.value })}\r\n                                    className=\"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-pink-500 focus:border-transparent outline-none\"\r\n                                >\r\n                                    <option value=\"\">Selecione</option>\r\n                                    {estados.map(estado => (\r\n                                        <option key={estado} value={estado}>{estado}</option>\r\n                                    ))}\r\n                                </select>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* Inscri├º├Áes (para PJ) */}\r\n                    {formData.cnpj && (\r\n                        <div>\r\n                            <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">Inscri├º├Áes</h3>\r\n                            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n                                <div>\r\n                                    <label className=\"block text-sm font-medium text-gray-700 mb-1\">Inscri├º├úo Estadual</label>\r\n                                    <input\r\n                                        type=\"text\"\r\n                                        placeholder=\"000.000.000.000\"\r\n                                        value={formData.stateRegistration || ''}\r\n                                        onChange={(e) => setFormData({ ...formData, stateRegistration: e.target.value })}\r\n                                        className=\"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-pink-500 focus:border-transparent outline-none\"\r\n                                    />\r\n                                </div>\r\n\r\n                                <div>\r\n                                    <label className=\"block text-sm font-medium text-gray-700 mb-1\">Inscri├º├úo Municipal</label>\r\n                                    <input\r\n                                        type=\"text\"\r\n                                        placeholder=\"000.000.000\"\r\n                                        value={formData.cityRegistration || ''}\r\n                                        onChange={(e) => setFormData({ ...formData, cityRegistration: e.target.value })}\r\n                                        className=\"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-pink-500 focus:border-transparent outline-none\"\r\n                                    />\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    )}\r\n\r\n                    {/* Buttons */}\r\n                    <div className=\"flex flex-col sm:flex-row gap-3 pt-4 border-t border-gray-200\">\r\n                        <button\r\n                            type=\"submit\"\r\n                            className=\"flex-1 py-3 gradient-bg text-white font-semibold rounded-xl hover:opacity-90 transition-all order-1 sm:order-2\"\r\n                        >\r\n                            {editingClient ? 'Atualizar Cliente' : 'Cadastrar Cliente'}\r\n                        </button>\r\n                        <button\r\n                            type=\"button\"\r\n                            onClick={onCancel}\r\n                            className=\"px-6 py-3 border border-gray-200 rounded-xl hover:bg-gray-50 transition-all order-2 sm:order-1\"\r\n                        >\r\n                            Cancelar\r\n                        </button>\r\n                    </div>\r\n                </form>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Dev\\workspace\\src\\components\\MainLayout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Dev\\workspace\\src\\components\\ProtectedRoute.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Dev\\workspace\\src\\components\\shared\\InstallPrompt.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":5,"column":58,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":5,"endColumn":61,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[185,188],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[185,188],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":9,"column":29,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":9,"endColumn":32,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[307,310],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[307,310],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useEffect } from 'react';\r\nimport { Download, X } from 'lucide-react';\r\n\r\nexport function InstallPrompt() {\r\n    const [deferredPrompt, setDeferredPrompt] = useState<any>(null);\r\n    const [isVisible, setIsVisible] = useState(false);\r\n\r\n    useEffect(() => {\r\n        const handler = (e: any) => {\r\n            e.preventDefault();\r\n            setDeferredPrompt(e);\r\n            setIsVisible(true);\r\n        };\r\n\r\n        window.addEventListener('beforeinstallprompt', handler);\r\n\r\n        return () => {\r\n            window.removeEventListener('beforeinstallprompt', handler);\r\n        };\r\n    }, []);\r\n\r\n    const handleInstallClick = async () => {\r\n        if (!deferredPrompt) return;\r\n\r\n        deferredPrompt.prompt();\r\n        const { outcome } = await deferredPrompt.userChoice;\r\n\r\n        if (outcome === 'accepted') {\r\n            setDeferredPrompt(null);\r\n            setIsVisible(false);\r\n        }\r\n    };\r\n\r\n    if (!isVisible) return null;\r\n\r\n    return (\r\n        <div className=\"fixed bottom-4 left-4 right-4 md:left-auto md:right-4 md:w-96 bg-white rounded-xl shadow-2xl p-4 border border-pink-100 z-50 animate-fade-in-up\">\r\n            <div className=\"flex items-start gap-4\">\r\n                <div className=\"w-12 h-12 bg-pink-50 rounded-xl flex items-center justify-center shrink-0\">\r\n                    <img src=\"/logo.png\" alt=\"Logo\" className=\"w-8 h-8 object-contain\" />\r\n                </div>\r\n                <div className=\"flex-1\">\r\n                    <h3 className=\"font-bold text-gray-900\">Instalar App</h3>\r\n                    <p className=\"text-sm text-gray-500 mt-1\">\r\n                        Instale o aplicativo para acesso r├ípido e melhor experi├¬ncia.\r\n                    </p>\r\n                    <div className=\"flex gap-2 mt-3\">\r\n                        <button\r\n                            onClick={handleInstallClick}\r\n                            className=\"flex-1 bg-pink-500 text-white px-4 py-2 rounded-lg text-sm font-semibold hover:bg-pink-600 transition-colors flex items-center justify-center gap-2\"\r\n                        >\r\n                            <Download className=\"w-4 h-4\" />\r\n                            Instalar\r\n                        </button>\r\n                        <button\r\n                            onClick={() => setIsVisible(false)}\r\n                            className=\"px-4 py-2 border border-gray-200 text-gray-600 rounded-lg text-sm font-semibold hover:bg-gray-50 transition-colors\"\r\n                        >\r\n                            Agora n├úo\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n                <button\r\n                    onClick={() => setIsVisible(false)}\r\n                    className=\"text-gray-400 hover:text-gray-600\"\r\n                >\r\n                    <X className=\"w-5 h-5\" />\r\n                </button>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Dev\\workspace\\src\\components\\shared\\Modal.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Dev\\workspace\\src\\components\\shared\\Skeleton.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Dev\\workspace\\src\\components\\shared\\StatCard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Dev\\workspace\\src\\components\\shared\\Table.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Dev\\workspace\\src\\components\\shared\\WhatsAppModal.tsx","messages":[{"ruleId":"react-hooks/immutability","severity":2,"message":"Error: Cannot access variable before it is declared\n\n`generateMessage` is accessed before it is declared, which prevents the earlier access from updating when this value changes over time.\n\nC:\\Dev\\workspace\\src\\components\\shared\\WhatsAppModal.tsx:31:17\n  29 |                 setTemplate('birthday');\n  30 |             } else if (appointment && clientPhone) {\n> 31 |                 generateMessage('confirmation');\n     |                 ^^^^^^^^^^^^^^^ `generateMessage` accessed before it is declared\n  32 |             } else if (clientPhone) {\n  33 |                 setTemplate('custom');\n  34 |                 setMessage(`Ol├í! Gostaria de falar com voc├¬ sobre...`);\n\nC:\\Dev\\workspace\\src\\components\\shared\\WhatsAppModal.tsx:39:5\n  37 |     }, [appointment, clientPhone, clientName, isBirthday, isOpen]);\n  38 |\n> 39 |     const generateMessage = (type: TemplateType) => {\n     |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 40 |         // Handle generic templates without appointment\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 41 |         if (!appointment && type === 'custom') {\n     ÔÇª\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 86 |         }\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 87 |     };\n     | ^^^^^^^ `generateMessage` is declared here\n  88 |\n  89 |     const handleSend = (platform: 'web' | 'desktop') => {\n  90 |         if (!clientPhone) return;","line":31,"column":17,"nodeType":null,"endLine":31,"endColumn":32},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'generateMessage'. Either include it or remove the dependency array.","line":37,"column":8,"nodeType":"ArrayExpression","endLine":37,"endColumn":66,"suggestions":[{"desc":"Update the dependencies array to be: [appointment, clientPhone, clientName, isBirthday, isOpen, generateMessage]","fix":{"range":[1424,1482],"text":"[appointment, clientPhone, clientName, isBirthday, isOpen, generateMessage]"}}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useEffect } from 'react';\r\nimport { Modal } from './Modal';\r\nimport { Monitor, Smartphone, Copy, Check } from 'lucide-react';\r\nimport { getBirthdayMessage } from '../../utils/birthday';\r\nimport type { Appointment } from '../../types';\r\nimport { formatDateToBR } from '../../utils/date';\r\n\r\ninterface WhatsAppModalProps {\r\n    isOpen: boolean;\r\n    onClose: () => void;\r\n    appointment: Appointment | null;\r\n    clientPhone?: string;\r\n    clientName?: string;\r\n    isBirthday?: boolean;\r\n}\r\n\r\ntype TemplateType = 'confirmation' | 'reminder' | 'delay' | 'thanks' | 'custom' | 'birthday';\r\n\r\nexport function WhatsAppModal({ isOpen, onClose, appointment, clientPhone, clientName, isBirthday }: WhatsAppModalProps) {\r\n    const [message, setMessage] = useState('');\r\n    const [template, setTemplate] = useState<TemplateType>('custom');\r\n    const [copied, setCopied] = useState(false);\r\n\r\n    useEffect(() => {\r\n        if (isOpen) {\r\n            if (isBirthday && clientName) {\r\n                const text = getBirthdayMessage(clientName);\r\n                setMessage(text);\r\n                setTemplate('birthday');\r\n            } else if (appointment && clientPhone) {\r\n                generateMessage('confirmation');\r\n            } else if (clientPhone) {\r\n                setTemplate('custom');\r\n                setMessage(`Ol├í! Gostaria de falar com voc├¬ sobre...`);\r\n            }\r\n        }\r\n    }, [appointment, clientPhone, clientName, isBirthday, isOpen]);\r\n\r\n    const generateMessage = (type: TemplateType) => {\r\n        // Handle generic templates without appointment\r\n        if (!appointment && type === 'custom') {\r\n            setMessage('');\r\n            setTemplate('custom');\r\n            return;\r\n        }\r\n\r\n        if (!appointment && type !== 'custom') {\r\n            // Cannot use appointment templates without an appointment\r\n            return;\r\n        }\r\n\r\n        if (appointment) {\r\n            const date = formatDateToBR(appointment.date);\r\n            const time = appointment.time;\r\n            const clientName = appointment.clientName;\r\n            const services = appointment.services.map(s => s.name).join(', ');\r\n\r\n            let text = '';\r\n            switch (type) {\r\n                case 'confirmation':\r\n                    text = `Ol├í ${clientName}! Ô£¿\\nPassando para confirmar seu agendamento para *${date} ├ás ${time}*.\\nServi├ºos: ${services}.\\n\\nPodemos confirmar? ­ƒÆà`;\r\n                    break;\r\n                case 'reminder':\r\n                    text = `Oie ${clientName}! ÔÅ░\\nLembrete do seu hor├írio hoje ├ás *${time}* no Juliana Miranda Concept.\\nEstamos te esperando! Ô£¿`;\r\n                    break;\r\n                case 'delay':\r\n                    text = `Oi ${clientName}, tudo bem? ­ƒÖÅ\\nTivemos um pequeno atraso aqui no Studio. Poderia vir 15 minutinhos mais tarde?\\nDesculpe o transtorno!`;\r\n                    break;\r\n                case 'thanks':\r\n                    text = `Obrigada pela visita, ${clientName}! ­ƒÆû\\nFoi um prazer te atender. Se puder, nos marque na foto das unhas! ­ƒô©\\nAt├® a pr├│xima!`;\r\n                    break;\r\n                case 'birthday':\r\n                    text = getBirthdayMessage(clientName);\r\n                    break;\r\n                case 'custom':\r\n                    text = message; // Keep current message\r\n                    break;\r\n            }\r\n\r\n            setTemplate(type);\r\n            if (type !== 'custom') setMessage(text);\r\n        } else if (clientName && type === 'birthday') {\r\n            const text = getBirthdayMessage(clientName);\r\n            setTemplate('birthday');\r\n            setMessage(text);\r\n        }\r\n    };\r\n\r\n    const handleSend = (platform: 'web' | 'desktop') => {\r\n        if (!clientPhone) return;\r\n\r\n        const sanitizedPhone = clientPhone.replace(/\\D/g, '');\r\n        const finalPhone = sanitizedPhone.length === 11 || sanitizedPhone.length === 10\r\n            ? `55${sanitizedPhone}`\r\n            : sanitizedPhone;\r\n\r\n        const encodedMessage = encodeURIComponent(message);\r\n\r\n        let url = '';\r\n        if (platform === 'desktop') {\r\n            url = `whatsapp://send?phone=${finalPhone}&text=${encodedMessage}`;\r\n        } else {\r\n            url = `https://web.whatsapp.com/send?phone=${finalPhone}&text=${encodedMessage}`;\r\n        }\r\n\r\n        window.open(url, '_blank');\r\n        onClose();\r\n    };\r\n\r\n    const copyToClipboard = () => {\r\n        navigator.clipboard.writeText(message);\r\n        setCopied(true);\r\n        setTimeout(() => setCopied(false), 2000);\r\n    };\r\n\r\n    return (\r\n        <Modal isOpen={isOpen} onClose={onClose} title=\"Enviar WhatsApp\">\r\n            <div className=\"p-6 space-y-6\">\r\n\r\n                {/* Template Selector - Only show if appointment exists */}\r\n                {appointment && (\r\n                    <div className=\"space-y-2\">\r\n                        <label className=\"text-sm font-bold text-gray-700\">Escolha o Modelo</label>\r\n                        <div className=\"flex gap-2 overflow-x-auto pb-2 scrollbar-hide\">\r\n                            <button\r\n                                onClick={() => generateMessage('confirmation')}\r\n                                className={`px-4 py-2 rounded-lg text-sm font-medium whitespace-nowrap transition-colors ${template === 'confirmation' ? 'bg-green-100 text-green-700 border border-green-200' : 'bg-gray-100 text-gray-600 hover:bg-gray-200'}`}\r\n                            >\r\n                                Confirma├º├úo\r\n                            </button>\r\n                            <button\r\n                                onClick={() => generateMessage('reminder')}\r\n                                className={`px-4 py-2 rounded-lg text-sm font-medium whitespace-nowrap transition-colors ${template === 'reminder' ? 'bg-green-100 text-green-700 border border-green-200' : 'bg-gray-100 text-gray-600 hover:bg-gray-200'}`}\r\n                            >\r\n                                Lembrete Hoje\r\n                            </button>\r\n                            <button\r\n                                onClick={() => generateMessage('delay')}\r\n                                className={`px-4 py-2 rounded-lg text-sm font-medium whitespace-nowrap transition-colors ${template === 'delay' ? 'bg-green-100 text-green-700 border border-green-200' : 'bg-gray-100 text-gray-600 hover:bg-gray-200'}`}\r\n                            >\r\n                                Aviso Atraso\r\n                            </button>\r\n                            <button\r\n                                onClick={() => generateMessage('thanks')}\r\n                                className={`px-4 py-2 rounded-lg text-sm font-medium whitespace-nowrap transition-colors ${template === 'thanks' ? 'bg-green-100 text-green-700 border border-green-200' : 'bg-gray-100 text-gray-600 hover:bg-gray-200'}`}\r\n                            >\r\n                                Agradecimento\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n                )}\r\n\r\n                {/* Message Editor */}\r\n                <div className=\"space-y-2\">\r\n                    <div className=\"flex justify-between items-center\">\r\n                        <label className=\"text-sm font-bold text-gray-700\">Mensagem</label>\r\n                        <button\r\n                            onClick={copyToClipboard}\r\n                            className=\"text-xs flex items-center gap-1 text-gray-500 hover:text-green-600 transition-colors\"\r\n                        >\r\n                            {copied ? <Check className=\"w-3 h-3\" /> : <Copy className=\"w-3 h-3\" />}\r\n                            {copied ? 'Copiado!' : 'Copiar texto'}\r\n                        </button>\r\n                    </div>\r\n                    <textarea\r\n                        value={message}\r\n                        onChange={(e) => {\r\n                            setMessage(e.target.value);\r\n                            setTemplate('custom');\r\n                        }}\r\n                        className=\"w-full h-32 p-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-green-500 focus:border-transparent outline-none resize-none text-sm leading-relaxed\"\r\n                        placeholder=\"Digite sua mensagem...\"\r\n                    />\r\n                </div>\r\n\r\n                {/* Actions */}\r\n                <div className=\"grid grid-cols-2 gap-3 pt-2\">\r\n                    <button\r\n                        onClick={() => handleSend('web')}\r\n                        className=\"flex flex-col items-center justify-center gap-2 p-4 border border-gray-200 rounded-xl hover:bg-gray-50 hover:border-gray-300 transition-all group\"\r\n                    >\r\n                        <Smartphone className=\"w-6 h-6 text-gray-400 group-hover:text-green-600 transition-colors\" />\r\n                        <span className=\"font-bold text-gray-600 group-hover:text-gray-900\">WhatsApp Web</span>\r\n                        <span className=\"text-[10px] text-gray-400 uppercase tracking-wider\">Navegador</span>\r\n                    </button>\r\n\r\n                    <button\r\n                        onClick={() => handleSend('desktop')}\r\n                        className=\"flex flex-col items-center justify-center gap-2 p-4 bg-green-50 border border-green-200 rounded-xl hover:bg-green-100 hover:border-green-300 transition-all group\"\r\n                    >\r\n                        <Monitor className=\"w-6 h-6 text-green-600 group-hover:scale-110 transition-transform\" />\r\n                        <span className=\"font-bold text-green-800\">App Desktop</span>\r\n                        <span className=\"text-[10px] text-green-600 uppercase tracking-wider\">Instalado</span>\r\n                    </button>\r\n                </div>\r\n            </div>\r\n        </Modal>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Dev\\workspace\\src\\contexts\\AuthContext.tsx","messages":[{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\nC:\\Dev\\workspace\\src\\contexts\\AuthContext.tsx:33:13\n  31 |     useEffect(() => {\n  32 |         if (!auth) {\n> 33 |             setIsLoading(false);\n     |             ^^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  34 |             return;\n  35 |         }\n  36 |","line":33,"column":13,"nodeType":null,"endLine":33,"endColumn":25},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":72,"column":37,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":72,"endColumn":40,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3389,3392],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3389,3392],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":103,"column":25,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":103,"endColumn":28,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4661,4664],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4661,4664],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":127,"column":25,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":127,"endColumn":28,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5760,5763],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5760,5763],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react-refresh/only-export-components","severity":2,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":174,"column":17,"nodeType":"Identifier","messageId":"namedExport","endLine":174,"endColumn":24}],"suppressedMessages":[],"errorCount":5,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { createContext, useContext, useState, useEffect } from 'react';\r\nimport {\r\n    signInWithEmailAndPassword,\r\n    signOut,\r\n    onAuthStateChanged,\r\n    updatePassword\r\n} from 'firebase/auth';\r\nimport { doc, getDoc, setDoc, collection, getDocs, limit, query } from 'firebase/firestore';\r\nimport { auth, db, functions } from '../lib/firebase';\r\nimport { httpsCallable } from 'firebase/functions';\r\nimport { toast } from 'sonner';\r\nimport type { ReactNode } from 'react';\r\nimport type { User } from '../types';\r\n\r\ninterface AuthContextType {\r\n    user: User | null;\r\n    isLoading: boolean;\r\n    isAuthenticated: boolean;\r\n    login: (email: string, password: string) => Promise<{ success: boolean; error?: string }>;\r\n    logout: () => Promise<void>;\r\n    addUser: (newUser: Omit<User, 'id' | 'createdAt'>, password?: string) => Promise<void>;\r\n    changePassword: (newPassword: string) => Promise<void>;\r\n}\r\n\r\nconst AuthContext = createContext<AuthContextType | null>(null);\r\n\r\nexport function AuthProvider({ children }: { children: ReactNode }) {\r\n    const [user, setUser] = useState<User | null>(null);\r\n    const [isLoading, setIsLoading] = useState(true);\r\n\r\n    useEffect(() => {\r\n        if (!auth) {\r\n            setIsLoading(false);\r\n            return;\r\n        }\r\n\r\n        const unsubscribe = onAuthStateChanged(auth, async (firebaseUser) => {\r\n            if (firebaseUser) {\r\n                if (db) {\r\n                    try {\r\n                        const userRef = doc(db, 'users', firebaseUser.uid);\r\n                        const userDoc = await getDoc(userRef);\r\n\r\n                        if (userDoc.exists()) {\r\n                            const userData = userDoc.data() as User;\r\n                            setUser({ ...userData, id: firebaseUser.uid, email: firebaseUser.email! });\r\n                        } else {\r\n                            // First time login, user exists in Auth but not in Firestore 'users' collection\r\n                            // Securely determine if this is the bootstrap user (Admin)\r\n                            const usersQuery = query(collection(db, 'users'), limit(1));\r\n                            const usersSnapshot = await getDocs(usersQuery);\r\n                            const isFirstUser = usersSnapshot.empty;\r\n\r\n                            // If it's the first user, they become Admin. Subsequent users default to Employee.\r\n                            const newProfile: User = {\r\n                                id: firebaseUser.uid,\r\n                                email: firebaseUser.email!,\r\n                                name: firebaseUser.displayName || firebaseUser.email?.split('@')[0] || 'Novo Usu├írio',\r\n                                role: isFirstUser ? 'admin' : 'employee',\r\n                                active: true,\r\n                                createdAt: new Date().toISOString()\r\n                            };\r\n\r\n                            // Only proceed if we successfully determined the first user status\r\n                            await setDoc(userRef, newProfile);\r\n                            setUser(newProfile);\r\n\r\n                            if (isFirstUser) {\r\n                                toast.success('Bem-vindo! Voc├¬ foi configurado como administrador do sistema.');\r\n                            }\r\n                        }\r\n                    } catch (error: any) {\r\n                        console.error('Erro ao sincronizar perfil do usu├írio:', error);\r\n                        // Fallback logic\r\n                        setUser({\r\n                            id: firebaseUser.uid,\r\n                            email: firebaseUser.email!,\r\n                            name: 'Usu├írio',\r\n                            role: 'employee',\r\n                            active: true,\r\n                            createdAt: new Date().toISOString()\r\n                        });\r\n\r\n                        if (error.code === 'permission-denied') {\r\n                            toast.error('Erro de permiss├úo no Firestore. Verifique as regras no Console.');\r\n                        }\r\n                    }\r\n                }\r\n            } else {\r\n                setUser(null);\r\n            }\r\n            setIsLoading(false);\r\n        });\r\n\r\n        return () => unsubscribe();\r\n    }, []);\r\n\r\n    const login = async (email: string, password: string): Promise<{ success: boolean; error?: string }> => {\r\n        if (!auth) return { success: false, error: 'Firebase n├úo inicializado' };\r\n        try {\r\n            await signInWithEmailAndPassword(auth, email, password);\r\n            return { success: true };\r\n        } catch (error: any) {\r\n            console.error('Erro ao fazer login:', error);\r\n            let message = 'E-mail ou senha incorretos';\r\n            if (error.code === 'auth/user-not-found') message = 'Usu├írio n├úo encontrado';\r\n            if (error.code === 'auth/wrong-password') message = 'Senha incorreta';\r\n            if (error.code === 'auth/network-request-failed') message = 'Erro de conex├úo com o servidor';\r\n            return { success: false, error: message };\r\n        }\r\n    };\r\n\r\n    const logout = async (): Promise<void> => {\r\n        if (!auth) return;\r\n        await signOut(auth);\r\n    };\r\n\r\n    const addUser = async (newUser: Omit<User, 'id' | 'createdAt'>, password?: string) => {\r\n        if (!functions) return;\r\n        try {\r\n            const createUserAuth = httpsCallable(functions, 'createUserAuth');\r\n            await createUserAuth({\r\n                ...newUser,\r\n                password: password || '123456' // Default if not provided\r\n            });\r\n            toast.success('Usu├írio criado com sucesso no Authentication e no Banco de Dados!');\r\n        } catch (error: any) {\r\n            console.error('Erro ao adicionar usu├írio via Cloud Function:', error);\r\n            toast.error(`Erro ao criar usu├írio: ${error.message}`);\r\n        }\r\n    };\r\n\r\n    const changePassword = async (newPassword: string) => {\r\n        if (!auth?.currentUser) return;\r\n        try {\r\n            await updatePassword(auth.currentUser, newPassword);\r\n            toast.success('Senha alterada com sucesso!');\r\n        } catch (error) {\r\n            console.error('Erro ao alterar senha:', error);\r\n            toast.error('Erro ao alterar senha. Talvez seja necess├írio fazer login novamente.');\r\n        }\r\n    };\r\n\r\n    if (isLoading) {\r\n        return (\r\n            <div className=\"flex items-center justify-center h-screen bg-gradient-to-br from-pink-50 via-purple-50 to-blue-50\">\r\n                <div className=\"text-center\">\r\n                    <div className=\"w-16 h-16 gradient-bg rounded-full flex items-center justify-center mx-auto mb-4 animate-pulse\">\r\n                        <span className=\"text-white text-2xl\">Ô£¿</span>\r\n                    </div>\r\n                    <p className=\"text-gray-500\">Carregando...</p>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <AuthContext.Provider\r\n            value={{\r\n                user,\r\n                isLoading,\r\n                isAuthenticated: !!user,\r\n                login,\r\n                logout,\r\n                addUser,\r\n                changePassword,\r\n            }}\r\n        >\r\n            {children}\r\n        </AuthContext.Provider>\r\n    );\r\n}\r\n\r\nexport function useAuth(): AuthContextType {\r\n    const context = useContext(AuthContext);\r\n    if (!context) {\r\n        throw new Error('useAuth must be used within an AuthProvider');\r\n    }\r\n    return context;\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Dev\\workspace\\src\\contexts\\DataContext.tsx","messages":[{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\nC:\\Dev\\workspace\\src\\contexts\\DataContext.tsx:63:13\n  61 |     useEffect(() => {\n  62 |         if (!db || !isAuthenticated) {\n> 63 |             setLoading(false);\n     |             ^^^^^^^^^^ Avoid calling setState() directly within an effect\n  64 |             return;\n  65 |         }\n  66 |","line":63,"column":13,"nodeType":null,"endLine":63,"endColumn":23},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":78,"column":37,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":78,"endColumn":40,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3143,3146],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3143,3146],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react-refresh/only-export-components","severity":2,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":348,"column":17,"nodeType":"Identifier","messageId":"namedExport","endLine":348,"endColumn":24}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { createContext, useContext, useState, useEffect, useMemo } from 'react';\r\nimport {\r\n    collection,\r\n    addDoc,\r\n    updateDoc,\r\n    deleteDoc,\r\n    onSnapshot,\r\n    query,\r\n    orderBy,\r\n    doc,\r\n    getDocs,\r\n    increment,\r\n} from 'firebase/firestore';\r\nimport { db } from '../lib/firebase';\r\nimport { toast } from 'sonner';\r\nimport { getCurrentDate, isCurrentMonth } from '../utils/date';\r\nimport { isBirthdayToday, isBirthdayThisMonth } from '../utils/birthday';\r\nimport { useAuth } from './AuthContext';\r\nimport type { ReactNode } from 'react';\r\nimport type { Client, Service, Appointment, FinancialRecord, DashboardStats, Staff } from '../types';\r\n\r\ninterface DataContextType {\r\n    clients: Client[];\r\n    services: Service[];\r\n    appointments: Appointment[];\r\n    financialRecords: FinancialRecord[];\r\n    dashboardStats: DashboardStats;\r\n    staff: Staff[];\r\n    loading: boolean;\r\n    todayBirthdays: Client[];\r\n    monthBirthdays: Client[];\r\n    addClient: (client: Omit<Client, 'id' | 'createdAt' | 'totalVisits'>) => Promise<void>;\r\n    updateClient: (id: string, data: Partial<Client>) => Promise<void>;\r\n    deleteClient: (id: string) => Promise<void>;\r\n    addService: (service: Omit<Service, 'id'>) => Promise<void>;\r\n    updateService: (id: string, data: Partial<Service>) => Promise<void>;\r\n    deleteService: (id: string) => Promise<void>;\r\n    addAppointment: (appointment: Omit<Appointment, 'id' | 'createdAt'>) => Promise<void>;\r\n    updateAppointment: (id: string, data: Partial<Appointment>) => Promise<void>;\r\n    deleteAppointment: (id: string) => Promise<void>;\r\n    getTodayAppointments: () => Appointment[];\r\n    addFinancialRecord: (record: Omit<FinancialRecord, 'id' | 'createdAt'>) => Promise<void>;\r\n    deleteFinancialRecord: (id: string) => Promise<void>;\r\n    syncVisitCounts: () => Promise<void>;\r\n    addStaff: (staff: Omit<Staff, 'id' | 'createdAt'>) => Promise<void>;\r\n    updateStaff: (id: string, data: Partial<Staff>) => Promise<void>;\r\n    deleteStaff: (id: string) => Promise<void>;\r\n}\r\n\r\nconst DataContext = createContext<DataContextType | null>(null);\r\n\r\nexport function DataProvider({ children }: { children: ReactNode }) {\r\n    const [clients, setClients] = useState<Client[]>([]);\r\n    const [services, setServices] = useState<Service[]>([]);\r\n    const [appointments, setAppointments] = useState<Appointment[]>([]);\r\n    const [financialRecords, setFinancialRecords] = useState<FinancialRecord[]>([]);\r\n    const [staff, setStaff] = useState<Staff[]>([]);\r\n    const [loading, setLoading] = useState(true);\r\n    const { isAuthenticated } = useAuth();\r\n\r\n    useEffect(() => {\r\n        if (!db || !isAuthenticated) {\r\n            setLoading(false);\r\n            return;\r\n        }\r\n\r\n        setLoading(true);\r\n        const totalCollections = 5;\r\n        const loadedCollections = new Set<string>();\r\n\r\n        const checkLoading = (collectionName: string) => {\r\n            loadedCollections.add(collectionName);\r\n            if (loadedCollections.size >= totalCollections) {\r\n                setLoading(false);\r\n            }\r\n        };\r\n\r\n        const handleError = (error: any, context: string) => {\r\n            console.error(`Status Firestore [${context}]:`, error);\r\n            if (error.code === 'permission-denied') {\r\n                console.warn('Verifique as regras de seguran├ºa do Firestore no Console.');\r\n            }\r\n            // Even if error, mark as loaded to prevent stuck spinner if rules block one collection\r\n            checkLoading(context);\r\n        };\r\n\r\n        // Clients listener\r\n        const qClients = query(collection(db, 'clients'), orderBy('name'));\r\n        const unsubscribeClients = onSnapshot(qClients, (snapshot) => {\r\n            setClients(snapshot.docs.map(doc => ({ ...doc.data(), id: doc.id } as Client)));\r\n            checkLoading('clientes');\r\n        }, (err) => handleError(err, 'clientes'));\r\n\r\n        // Services listener\r\n        const qServices = query(collection(db, 'services'), orderBy('name'));\r\n        const unsubscribeServices = onSnapshot(qServices, (snapshot) => {\r\n            setServices(snapshot.docs.map(doc => ({ ...doc.data(), id: doc.id } as Service)));\r\n            checkLoading('servi├ºos');\r\n        }, (err) => handleError(err, 'servi├ºos'));\r\n\r\n        // Appointments listener\r\n        const qAppointments = query(collection(db, 'appointments'), orderBy('date', 'desc'));\r\n        const unsubscribeAppointments = onSnapshot(qAppointments, (snapshot) => {\r\n            setAppointments(snapshot.docs.map(doc => ({ ...doc.data(), id: doc.id } as Appointment)));\r\n            checkLoading('agendamentos');\r\n        }, (err) => handleError(err, 'agendamentos'));\r\n\r\n        // Financial Records listener\r\n        const qFinancial = query(collection(db, 'financialRecords'), orderBy('date', 'desc'));\r\n        const unsubscribeFinancial = onSnapshot(qFinancial, (snapshot) => {\r\n            setFinancialRecords(snapshot.docs.map(doc => ({ ...doc.data(), id: doc.id } as FinancialRecord)));\r\n            checkLoading('financeiro');\r\n        }, (err) => handleError(err, 'financeiro'));\r\n\r\n        // Staff listener\r\n        const qStaff = query(collection(db, 'staff'), orderBy('name'));\r\n        const unsubscribeStaff = onSnapshot(qStaff, (snapshot) => {\r\n            setStaff(snapshot.docs.map(doc => ({ ...doc.data(), id: doc.id } as Staff)));\r\n            checkLoading('profissionais');\r\n        }, (err) => handleError(err, 'profissionais'));\r\n\r\n        return () => {\r\n            unsubscribeClients();\r\n            unsubscribeServices();\r\n            unsubscribeAppointments();\r\n            unsubscribeFinancial();\r\n            unsubscribeStaff();\r\n        };\r\n    }, [isAuthenticated]);\r\n\r\n    // Client actions\r\n    const addClient = async (client: Omit<Client, 'id' | 'createdAt' | 'totalVisits'>) => {\r\n        if (!db) return;\r\n        await addDoc(collection(db, 'clients'), {\r\n            ...client,\r\n            totalVisits: 0,\r\n            createdAt: getCurrentDate()\r\n        });\r\n    };\r\n\r\n    const updateClient = async (id: string, data: Partial<Client>) => {\r\n        if (!db) return;\r\n        await updateDoc(doc(db, 'clients', id), data);\r\n    };\r\n\r\n    const deleteClient = async (id: string) => {\r\n        if (!db) return;\r\n        await deleteDoc(doc(db, 'clients', id));\r\n    };\r\n\r\n    // Service actions\r\n    const addService = async (service: Omit<Service, 'id'>) => {\r\n        if (!db) return;\r\n        await addDoc(collection(db, 'services'), service);\r\n    };\r\n\r\n    const updateService = async (id: string, data: Partial<Service>) => {\r\n        if (!db) return;\r\n        await updateDoc(doc(db, 'services', id), data);\r\n    };\r\n\r\n    const deleteService = async (id: string) => {\r\n        if (!db) return;\r\n        await deleteDoc(doc(db, 'services', id));\r\n    };\r\n\r\n    // Appointment actions\r\n    const addAppointment = async (appointment: Omit<Appointment, 'id' | 'createdAt'>) => {\r\n        if (!db) return;\r\n        await addDoc(collection(db, 'appointments'), {\r\n            ...appointment,\r\n            createdAt: getCurrentDate()\r\n        });\r\n\r\n        // Update client last visit and increment visits\r\n        await updateDoc(doc(db, 'clients', appointment.clientId), {\r\n            lastVisit: appointment.date,\r\n            totalVisits: increment(1)\r\n        });\r\n    };\r\n\r\n    const updateAppointment = async (id: string, data: Partial<Appointment>) => {\r\n        if (!db) return;\r\n\r\n        const oldApt = appointments.find(a => a.id === id);\r\n\r\n        // Handle client change for visit counts\r\n        if (oldApt && data.clientId && data.clientId !== oldApt.clientId) {\r\n            // Decrement old client\r\n            await updateDoc(doc(db, 'clients', oldApt.clientId), {\r\n                totalVisits: increment(-1)\r\n            });\r\n            // Increment new client\r\n            await updateDoc(doc(db, 'clients', data.clientId), {\r\n                totalVisits: increment(1)\r\n            });\r\n        }\r\n\r\n        await updateDoc(doc(db, 'appointments', id), data);\r\n    };\r\n\r\n    const deleteAppointment = async (id: string) => {\r\n        if (!db) return;\r\n        const apt = appointments.find(a => a.id === id);\r\n        if (apt) {\r\n            await updateDoc(doc(db, 'clients', apt.clientId), {\r\n                totalVisits: increment(-1)\r\n            });\r\n        }\r\n        await deleteDoc(doc(db, 'appointments', id));\r\n    };\r\n\r\n    const getTodayAppointments = (): Appointment[] => {\r\n        const today = getCurrentDate();\r\n        return appointments\r\n            .filter(a => a.date === today && a.status !== 'cancelled')\r\n            .sort((a, b) => a.time.localeCompare(b.time));\r\n    };\r\n\r\n    // Financial actions\r\n    const addFinancialRecord = async (record: Omit<FinancialRecord, 'id' | 'createdAt'>) => {\r\n        if (!db) return;\r\n        await addDoc(collection(db, 'financialRecords'), {\r\n            ...record,\r\n            createdAt: getCurrentDate()\r\n        });\r\n    };\r\n\r\n    const deleteFinancialRecord = async (id: string) => {\r\n        if (!db) return;\r\n        await deleteDoc(doc(db, 'financialRecords', id));\r\n    };\r\n\r\n    const syncVisitCounts = async () => {\r\n        if (!db) return;\r\n        try {\r\n            // 1. Get all appointments and clients\r\n            const appointmentsQuery = await getDocs(collection(db, 'appointments'));\r\n            const clientsQuery = await getDocs(collection(db, 'clients'));\r\n\r\n            const appointmentsData = appointmentsQuery.docs.map(doc => doc.data());\r\n            const clientsDocs = clientsQuery.docs;\r\n\r\n            // 2. Update each client\r\n            for (const clientDoc of clientsDocs) {\r\n                const clientId = clientDoc.id;\r\n                const visitCount = appointmentsData.filter(a => a.clientId === clientId && a.status !== 'cancelled').length;\r\n\r\n                await updateDoc(doc(db, 'clients', clientId), {\r\n                    totalVisits: visitCount\r\n                });\r\n            }\r\n            toast.success('Visitas sincronizadas com sucesso!');\r\n        } catch (error) {\r\n            console.error('Erro ao sincronizar visitas:', error);\r\n            toast.error('Erro ao sincronizar visitas.');\r\n        }\r\n    };\r\n\r\n    // Staff actions\r\n    const addStaff = async (staffMember: Omit<Staff, 'id' | 'createdAt'>) => {\r\n        if (!db) return;\r\n        await addDoc(collection(db, 'staff'), {\r\n            ...staffMember,\r\n            createdAt: getCurrentDate()\r\n        });\r\n    };\r\n\r\n    const updateStaff = async (id: string, data: Partial<Staff>) => {\r\n        if (!db) return;\r\n        await updateDoc(doc(db, 'staff', id), data);\r\n    };\r\n\r\n    const deleteStaff = async (id: string) => {\r\n        if (!db) return;\r\n        await deleteDoc(doc(db, 'staff', id));\r\n    };\r\n\r\n    // Calculate dashboard stats\r\n    const dashboardStats: DashboardStats = useMemo(() => {\r\n        const today = getCurrentDate();\r\n\r\n        const activeToday = appointments.filter(a => a.date === today && a.status !== 'cancelled');\r\n\r\n        // Filter financial records by current month\r\n        const monthlyRevenue = financialRecords\r\n            .filter(r => r.type === 'income' && isCurrentMonth(r.date))\r\n            .reduce((sum, r) => sum + r.value, 0);\r\n\r\n        const monthlyExpenses = financialRecords\r\n            .filter(r => r.type === 'expense' && isCurrentMonth(r.date))\r\n            .reduce((sum, r) => sum + r.value, 0);\r\n\r\n        return {\r\n            totalClients: clients.length,\r\n            totalAppointments: appointments.length,\r\n            todayAppointments: activeToday.length,\r\n            monthlyRevenue,\r\n            monthlyExpenses,\r\n            monthlyProfit: monthlyRevenue - monthlyExpenses\r\n        };\r\n    }, [clients, appointments, financialRecords]);\r\n\r\n    // Calculate birthdays\r\n    const todayBirthdays = useMemo(() => {\r\n        return clients.filter(c => c.birthDate && isBirthdayToday(c.birthDate));\r\n    }, [clients]);\r\n\r\n    const monthBirthdays = useMemo(() => {\r\n        return clients.filter(c => c.birthDate && isBirthdayThisMonth(c.birthDate));\r\n    }, [clients]);\r\n\r\n    return (\r\n        <DataContext.Provider\r\n            value={{\r\n                clients,\r\n                services,\r\n                appointments,\r\n                financialRecords,\r\n                dashboardStats,\r\n                addClient,\r\n                updateClient,\r\n                deleteClient,\r\n                addService,\r\n                updateService,\r\n                deleteService,\r\n                addAppointment,\r\n                updateAppointment,\r\n                deleteAppointment,\r\n                getTodayAppointments,\r\n                addFinancialRecord,\r\n                deleteFinancialRecord,\r\n                syncVisitCounts,\r\n                staff,\r\n                addStaff,\r\n                updateStaff,\r\n                deleteStaff,\r\n                loading,\r\n                todayBirthdays,\r\n                monthBirthdays,\r\n            }}\r\n        >\r\n            {children}\r\n        </DataContext.Provider>\r\n    );\r\n}\r\n\r\nexport function useData(): DataContextType {\r\n    const context = useContext(DataContext);\r\n    if (!context) {\r\n        throw new Error('useData must be used within a DataProvider');\r\n    }\r\n    return context;\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Dev\\workspace\\src\\contexts\\ThemeContext.tsx","messages":[{"ruleId":"react-refresh/only-export-components","severity":2,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":44,"column":17,"nodeType":"Identifier","messageId":"namedExport","endLine":44,"endColumn":25}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { createContext, useContext, useEffect, useState } from 'react';\r\n\r\ntype Theme = 'light' | 'dark';\r\n\r\ninterface ThemeContextType {\r\n    theme: Theme;\r\n    toggleTheme: () => void;\r\n}\r\n\r\nconst ThemeContext = createContext<ThemeContextType | undefined>(undefined);\r\n\r\nexport function ThemeProvider({ children }: { children: React.ReactNode }) {\r\n    const [theme, setTheme] = useState<Theme>(() => {\r\n        // 1. Check localStorage\r\n        const savedTheme = localStorage.getItem('theme') as Theme;\r\n        if (savedTheme) return savedTheme;\r\n\r\n        // 2. Check system preference\r\n        if (window.matchMedia('(prefers-color-scheme: dark)').matches) {\r\n            return 'dark';\r\n        }\r\n\r\n        return 'light';\r\n    });\r\n\r\n    useEffect(() => {\r\n        const root = window.document.documentElement;\r\n        root.classList.remove('light', 'dark');\r\n        root.classList.add(theme);\r\n        localStorage.setItem('theme', theme);\r\n    }, [theme]);\r\n\r\n    const toggleTheme = () => {\r\n        setTheme((prev) => (prev === 'light' ? 'dark' : 'light'));\r\n    };\r\n\r\n    return (\r\n        <ThemeContext.Provider value={{ theme, toggleTheme }}>\r\n            {children}\r\n        </ThemeContext.Provider>\r\n    );\r\n}\r\n\r\nexport function useTheme() {\r\n    const context = useContext(ThemeContext);\r\n    if (context === undefined) {\r\n        throw new Error('useTheme must be used within a ThemeProvider');\r\n    }\r\n    return context;\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Dev\\workspace\\src\\hooks\\useAppointmentManagement.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Dev\\workspace\\src\\hooks\\useToast.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Dev\\workspace\\src\\lib\\firebase.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Dev\\workspace\\src\\main.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Dev\\workspace\\src\\routes\\index.tsx","messages":[{"ruleId":"react-refresh/only-export-components","severity":2,"message":"Fast refresh only works when a file only exports components. Move your component(s) to a separate file.","line":18,"column":7,"nodeType":"Identifier","messageId":"localComponents","endLine":18,"endColumn":20}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { createBrowserRouter, Navigate } from 'react-router-dom';\r\nimport { lazy, Suspense } from 'react';\r\nimport { ProtectedRoute } from '../components/ProtectedRoute';\r\nimport { MainLayout } from '../components/MainLayout';\r\n\r\n// Lazy load sections for better performance\r\nconst Dashboard = lazy(() => import('../sections/Dashboard').then(m => ({ default: m.Dashboard })));\r\nconst Clients = lazy(() => import('../sections/Clients').then(m => ({ default: m.Clients })));\r\nconst Services = lazy(() => import('../sections/Services').then(m => ({ default: m.Services })));\r\nconst Appointments = lazy(() => import('../sections/Appointments').then(m => ({ default: m.Appointments })));\r\nconst Finance = lazy(() => import('../sections/Finance').then(m => ({ default: m.Finance })));\r\nconst Reports = lazy(() => import('../sections/Reports').then(m => ({ default: m.Reports })));\r\nconst Users = lazy(() => import('../sections/Users').then(m => ({ default: m.Users })));\r\nconst Staff = lazy(() => import('../sections/Staff').then(m => ({ default: m.Staff })));\r\nconst Login = lazy(() => import('../sections/Login').then(m => ({ default: m.Login })));\r\n\r\n// Loading component for Suspense\r\nconst SectionLoader = () => (\r\n    <div className=\"flex items-center justify-center min-h-[400px]\">\r\n        <div className=\"w-12 h-12 border-4 border-pink-100 border-t-pink-500 rounded-full animate-spin\"></div>\r\n    </div>\r\n);\r\n\r\nexport const router = createBrowserRouter([\r\n    {\r\n        path: '/login',\r\n        element: (\r\n            <Suspense fallback={<SectionLoader />}>\r\n                <Login />\r\n            </Suspense>\r\n        )\r\n    },\r\n    {\r\n        path: '/',\r\n        element: (\r\n            <ProtectedRoute>\r\n                <MainLayout />\r\n            </ProtectedRoute>\r\n        ),\r\n        children: [\r\n            {\r\n                index: true,\r\n                element: <Navigate to=\"/dashboard\" replace />\r\n            },\r\n            {\r\n                path: 'dashboard',\r\n                element: <Suspense fallback={<SectionLoader />}><Dashboard /></Suspense>\r\n            },\r\n            {\r\n                path: 'clients',\r\n                element: <Suspense fallback={<SectionLoader />}><Clients /></Suspense>\r\n            },\r\n            {\r\n                path: 'services',\r\n                element: <Suspense fallback={<SectionLoader />}><Services /></Suspense>\r\n            },\r\n            {\r\n                path: 'appointments',\r\n                element: <Suspense fallback={<SectionLoader />}><Appointments /></Suspense>\r\n            },\r\n            {\r\n                path: 'finance',\r\n                element: <Suspense fallback={<SectionLoader />}><Finance /></Suspense>\r\n            },\r\n            {\r\n                path: 'reports',\r\n                element: <Suspense fallback={<SectionLoader />}><Reports /></Suspense>\r\n            },\r\n            {\r\n                path: 'users',\r\n                element: <Suspense fallback={<SectionLoader />}><Users /></Suspense>\r\n            },\r\n            {\r\n                path: 'staff',\r\n                element: <Suspense fallback={<SectionLoader />}><Staff /></Suspense>\r\n            },\r\n            {\r\n                path: '*',\r\n                element: <Navigate to=\"/dashboard\" replace />\r\n            }\r\n        ]\r\n    }\r\n]);\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Dev\\workspace\\src\\sections\\Appointments.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Dev\\workspace\\src\\sections\\Clients.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Dev\\workspace\\src\\sections\\Dashboard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Dev\\workspace\\src\\sections\\Finance.tsx","messages":[{"ruleId":"react-hooks/preserve-manual-memoization","severity":2,"message":"Compilation Skipped: Existing memoization could not be preserved\n\nReact Compiler has skipped optimizing this component because the existing manual memoization could not be preserved. The inferred dependencies did not match the manually specified dependencies, which could cause the value to change more or less frequently than expected. The inferred dependency was `isSelectedPeriod`, but the source dependencies were [financialRecords, activeTab, selectedMonth, selectedYear]. Inferred different dependency than source.\n\nC:\\Dev\\workspace\\src\\sections\\Finance.tsx:52:37\n  50 |     });\n  51 |\n> 52 |     const filteredRecords = useMemo(() => {\n     |                                     ^^^^^^^\n> 53 |         return financialRecords\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 54 |             .filter((r: FinancialRecord) => {\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 55 |                 const matchesTab = activeTab === 'all' || r.type === activeTab;\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 56 |                 const matchesPeriod = isSelectedPeriod(r.date);\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 57 |                 return matchesTab && matchesPeriod;\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 58 |             })\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 59 |             .sort((a, b) => new Date(b.date).getTime() - new Date(a.date).getTime());\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 60 |     }, [financialRecords, activeTab, selectedMonth, selectedYear]);\n     | ^^^^^^ Could not preserve existing manual memoization\n  61 |\n  62 |     const totals = useMemo(() => {\n  63 |         const income = financialRecords","line":52,"column":37,"nodeType":null,"endLine":60,"endColumn":6},{"ruleId":"react-hooks/preserve-manual-memoization","severity":2,"message":"Compilation Skipped: Existing memoization could not be preserved\n\nReact Compiler has skipped optimizing this component because the existing manual memoization could not be preserved. The inferred dependencies did not match the manually specified dependencies, which could cause the value to change more or less frequently than expected. The inferred dependency was `isSelectedPeriod`, but the source dependencies were [financialRecords, activeTab, selectedMonth, selectedYear]. Inferred different dependency than source.\n\nC:\\Dev\\workspace\\src\\sections\\Finance.tsx:52:37\n  50 |     });\n  51 |\n> 52 |     const filteredRecords = useMemo(() => {\n     |                                     ^^^^^^^\n> 53 |         return financialRecords\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 54 |             .filter((r: FinancialRecord) => {\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 55 |                 const matchesTab = activeTab === 'all' || r.type === activeTab;\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 56 |                 const matchesPeriod = isSelectedPeriod(r.date);\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 57 |                 return matchesTab && matchesPeriod;\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 58 |             })\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 59 |             .sort((a, b) => new Date(b.date).getTime() - new Date(a.date).getTime());\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 60 |     }, [financialRecords, activeTab, selectedMonth, selectedYear]);\n     | ^^^^^^ Could not preserve existing manual memoization\n  61 |\n  62 |     const totals = useMemo(() => {\n  63 |         const income = financialRecords","line":52,"column":37,"nodeType":null,"endLine":60,"endColumn":6},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useMemo has a missing dependency: 'isSelectedPeriod'. Either include it or remove the dependency array.","line":60,"column":8,"nodeType":"ArrayExpression","endLine":60,"endColumn":66,"suggestions":[{"desc":"Update the dependencies array to be: [financialRecords, activeTab, isSelectedPeriod]","fix":{"range":[2570,2628],"text":"[financialRecords, activeTab, isSelectedPeriod]"}}]},{"ruleId":"react-hooks/preserve-manual-memoization","severity":2,"message":"Compilation Skipped: Existing memoization could not be preserved\n\nReact Compiler has skipped optimizing this component because the existing manual memoization could not be preserved. The inferred dependencies did not match the manually specified dependencies, which could cause the value to change more or less frequently than expected. The inferred dependency was `isSelectedPeriod`, but the source dependencies were [financialRecords, selectedMonth, selectedYear]. Inferred different dependency than source.\n\nC:\\Dev\\workspace\\src\\sections\\Finance.tsx:62:28\n  60 |     }, [financialRecords, activeTab, selectedMonth, selectedYear]);\n  61 |\n> 62 |     const totals = useMemo(() => {\n     |                            ^^^^^^^\n> 63 |         const income = financialRecords\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 64 |             .filter((r) => r.type === 'income' && isSelectedPeriod(r.date))\n     ÔÇª\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 73 |         };\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 74 |     }, [financialRecords, selectedMonth, selectedYear]);\n     | ^^^^^^ Could not preserve existing manual memoization\n  75 |\n  76 |     const getPaymentMethodLabel = (method: PaymentMethod) => {\n  77 |         switch (method) {","line":62,"column":28,"nodeType":null,"endLine":74,"endColumn":6},{"ruleId":"react-hooks/preserve-manual-memoization","severity":2,"message":"Compilation Skipped: Existing memoization could not be preserved\n\nReact Compiler has skipped optimizing this component because the existing manual memoization could not be preserved. The inferred dependencies did not match the manually specified dependencies, which could cause the value to change more or less frequently than expected. The inferred dependency was `isSelectedPeriod`, but the source dependencies were [financialRecords, selectedMonth, selectedYear]. Inferred different dependency than source.\n\nC:\\Dev\\workspace\\src\\sections\\Finance.tsx:62:28\n  60 |     }, [financialRecords, activeTab, selectedMonth, selectedYear]);\n  61 |\n> 62 |     const totals = useMemo(() => {\n     |                            ^^^^^^^\n> 63 |         const income = financialRecords\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 64 |             .filter((r) => r.type === 'income' && isSelectedPeriod(r.date))\n     ÔÇª\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 73 |         };\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 74 |     }, [financialRecords, selectedMonth, selectedYear]);\n     | ^^^^^^ Could not preserve existing manual memoization\n  75 |\n  76 |     const getPaymentMethodLabel = (method: PaymentMethod) => {\n  77 |         switch (method) {","line":62,"column":28,"nodeType":null,"endLine":74,"endColumn":6},{"ruleId":"react-hooks/preserve-manual-memoization","severity":2,"message":"Compilation Skipped: Existing memoization could not be preserved\n\nReact Compiler has skipped optimizing this component because the existing manual memoization could not be preserved. The inferred dependencies did not match the manually specified dependencies, which could cause the value to change more or less frequently than expected. The inferred dependency was `isSelectedPeriod`, but the source dependencies were [financialRecords, selectedMonth, selectedYear]. Inferred different dependency than source.\n\nC:\\Dev\\workspace\\src\\sections\\Finance.tsx:62:28\n  60 |     }, [financialRecords, activeTab, selectedMonth, selectedYear]);\n  61 |\n> 62 |     const totals = useMemo(() => {\n     |                            ^^^^^^^\n> 63 |         const income = financialRecords\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 64 |             .filter((r) => r.type === 'income' && isSelectedPeriod(r.date))\n     ÔÇª\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 73 |         };\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 74 |     }, [financialRecords, selectedMonth, selectedYear]);\n     | ^^^^^^ Could not preserve existing manual memoization\n  75 |\n  76 |     const getPaymentMethodLabel = (method: PaymentMethod) => {\n  77 |         switch (method) {","line":62,"column":28,"nodeType":null,"endLine":74,"endColumn":6},{"ruleId":"react-hooks/preserve-manual-memoization","severity":2,"message":"Compilation Skipped: Existing memoization could not be preserved\n\nReact Compiler has skipped optimizing this component because the existing manual memoization could not be preserved. The inferred dependencies did not match the manually specified dependencies, which could cause the value to change more or less frequently than expected. The inferred dependency was `isSelectedPeriod`, but the source dependencies were [financialRecords, selectedMonth, selectedYear]. Inferred different dependency than source.\n\nC:\\Dev\\workspace\\src\\sections\\Finance.tsx:62:28\n  60 |     }, [financialRecords, activeTab, selectedMonth, selectedYear]);\n  61 |\n> 62 |     const totals = useMemo(() => {\n     |                            ^^^^^^^\n> 63 |         const income = financialRecords\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 64 |             .filter((r) => r.type === 'income' && isSelectedPeriod(r.date))\n     ÔÇª\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 73 |         };\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 74 |     }, [financialRecords, selectedMonth, selectedYear]);\n     | ^^^^^^ Could not preserve existing manual memoization\n  75 |\n  76 |     const getPaymentMethodLabel = (method: PaymentMethod) => {\n  77 |         switch (method) {","line":62,"column":28,"nodeType":null,"endLine":74,"endColumn":6},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useMemo has a missing dependency: 'isSelectedPeriod'. Either include it or remove the dependency array.","line":74,"column":8,"nodeType":"ArrayExpression","endLine":74,"endColumn":55,"suggestions":[{"desc":"Update the dependencies array to be: [financialRecords, isSelectedPeriod]","fix":{"range":[3130,3177],"text":"[financialRecords, isSelectedPeriod]"}}]}],"suppressedMessages":[],"errorCount":6,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useMemo } from 'react';\r\nimport { useData } from '../contexts/DataContext';\r\nimport { formatDateToBR, getCurrentDate } from '../utils/date';\r\nimport type { FinancialFormData, FinancialRecord, PaymentMethod } from '../types';\r\nimport { INCOME_CATEGORIES, EXPENSE_CATEGORIES } from '../types';\r\nimport { Plus, TrendingUp, TrendingDown, DollarSign, Trash2, Calendar } from 'lucide-react';\r\nimport { StatCard } from '../components/shared/StatCard';\r\nimport { Modal } from '../components/shared/Modal';\r\nimport { Table } from '../components/shared/Table';\r\nimport { formatCurrency } from '../utils/currency';\r\n\r\nexport function Finance() {\r\n    const { financialRecords, addFinancialRecord, deleteFinancialRecord } = useData();\r\n    const [activeTab, setActiveTab] = useState<'all' | 'income' | 'expense'>('all');\r\n    const [showForm, setShowForm] = useState(false);\r\n\r\n    // Period selection\r\n    const now = new Date();\r\n    const [selectedMonth, setSelectedMonth] = useState(now.getMonth() + 1);\r\n    const [selectedYear, setSelectedYear] = useState(now.getFullYear());\r\n\r\n    const isSelectedPeriod = (dateString: string) => {\r\n        const [year, month] = dateString.split('-').map(Number);\r\n        return year === selectedYear && month === selectedMonth;\r\n    };\r\n\r\n    const yearOptions = Array.from({ length: 3 }, (_, i) => now.getFullYear() - i);\r\n    const monthOptions = [\r\n        { value: 1, label: 'Janeiro' },\r\n        { value: 2, label: 'Fevereiro' },\r\n        { value: 3, label: 'Mar├ºo' },\r\n        { value: 4, label: 'Abril' },\r\n        { value: 5, label: 'Maio' },\r\n        { value: 6, label: 'Junho' },\r\n        { value: 7, label: 'Julho' },\r\n        { value: 8, label: 'Agosto' },\r\n        { value: 9, label: 'Setembro' },\r\n        { value: 10, label: 'Outubro' },\r\n        { value: 11, label: 'Novembro' },\r\n        { value: 12, label: 'Dezembro' },\r\n    ];\r\n\r\n    const [formData, setFormData] = useState<FinancialFormData>({\r\n        type: 'income',\r\n        category: '',\r\n        description: '',\r\n        value: '',\r\n        date: getCurrentDate(),\r\n        paymentMethod: 'pix'\r\n    });\r\n\r\n    const filteredRecords = useMemo(() => {\r\n        return financialRecords\r\n            .filter((r: FinancialRecord) => {\r\n                const matchesTab = activeTab === 'all' || r.type === activeTab;\r\n                const matchesPeriod = isSelectedPeriod(r.date);\r\n                return matchesTab && matchesPeriod;\r\n            })\r\n            .sort((a, b) => new Date(b.date).getTime() - new Date(a.date).getTime());\r\n    }, [financialRecords, activeTab, selectedMonth, selectedYear]);\r\n\r\n    const totals = useMemo(() => {\r\n        const income = financialRecords\r\n            .filter((r) => r.type === 'income' && isSelectedPeriod(r.date))\r\n            .reduce((sum, r) => sum + r.value, 0);\r\n        const expense = financialRecords\r\n            .filter((r) => r.type === 'expense' && isSelectedPeriod(r.date))\r\n            .reduce((sum, r) => sum + r.value, 0);\r\n        return {\r\n            income,\r\n            expense,\r\n            profit: income - expense\r\n        };\r\n    }, [financialRecords, selectedMonth, selectedYear]);\r\n\r\n    const getPaymentMethodLabel = (method: PaymentMethod) => {\r\n        switch (method) {\r\n            case 'pix': return 'PIX';\r\n            case 'cash': return 'Dinheiro';\r\n            case 'card': return 'Cart├úo';\r\n            default: return method;\r\n        }\r\n    };\r\n\r\n    const handleSubmit = async (e: React.FormEvent) => {\r\n        e.preventDefault();\r\n        await addFinancialRecord({\r\n            ...formData,\r\n            value: parseFloat(formData.value),\r\n        });\r\n        setShowForm(false);\r\n        setFormData({\r\n            type: 'income',\r\n            category: '',\r\n            description: '',\r\n            value: '',\r\n            date: getCurrentDate(),\r\n            paymentMethod: 'pix'\r\n        });\r\n    };\r\n\r\n    const handleDelete = async (id: string) => {\r\n        if (confirm('Tem certeza que deseja excluir este registro?')) {\r\n            await deleteFinancialRecord(id);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"space-y-6\">\r\n            <div className=\"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4\">\r\n                <div>\r\n                    <h1 className=\"text-2xl sm:text-3xl font-bold text-gray-900\">Financeiro</h1>\r\n                    <p className=\"text-gray-500 mt-1\">Controle suas entradas e sa├¡das</p>\r\n                </div>\r\n                <button\r\n                    onClick={() => setShowForm(true)}\r\n                    className=\"w-full sm:w-auto flex items-center justify-center gap-2 px-6 py-3 gradient-bg text-white rounded-xl hover:opacity-90 transition-all shadow-lg font-bold\"\r\n                >\r\n                    <Plus className=\"w-5 h-5\" />\r\n                    Novo Registro\r\n                </button>\r\n            </div>\r\n\r\n            {/* Metrics Grid */}\r\n            <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6\">\r\n                <StatCard\r\n                    title=\"Receitas\"\r\n                    value={formatCurrency(totals.income)}\r\n                    icon={TrendingUp}\r\n                    color=\"bg-green-500\"\r\n                />\r\n                <StatCard\r\n                    title=\"Despesas\"\r\n                    value={formatCurrency(totals.expense)}\r\n                    icon={TrendingDown}\r\n                    color=\"bg-red-500\"\r\n                />\r\n                <StatCard\r\n                    title=\"Saldo\"\r\n                    value={formatCurrency(totals.profit)}\r\n                    icon={DollarSign}\r\n                    color=\"bg-pink-500\"\r\n                />\r\n            </div>\r\n\r\n            {/* Period Selector */}\r\n            <div className=\"bg-white p-4 rounded-xl shadow-sm border border-gray-100\">\r\n                <div className=\"flex flex-col sm:flex-row items-start sm:items-center gap-4\">\r\n                    <div className=\"flex items-center gap-2\">\r\n                        <Calendar className=\"w-5 h-5 text-gray-500\" />\r\n                        <span className=\"text-sm font-medium text-gray-700\">Per├¡odo:</span>\r\n                    </div>\r\n                    <div className=\"flex gap-3 flex-1\">\r\n                        <select\r\n                            value={selectedMonth}\r\n                            onChange={(e) => setSelectedMonth(Number(e.target.value))}\r\n                            className=\"flex-1 sm:flex-none px-4 py-2 border border-gray-200 rounded-xl focus:ring-2 focus:ring-pink-500 focus:border-transparent outline-none text-sm bg-white\"\r\n                        >\r\n                            {monthOptions.map(month => (\r\n                                <option key={month.value} value={month.value}>{month.label}</option>\r\n                            ))}\r\n                        </select>\r\n                        <select\r\n                            value={selectedYear}\r\n                            onChange={(e) => setSelectedYear(Number(e.target.value))}\r\n                            className=\"px-4 py-2 border border-gray-200 rounded-xl focus:ring-2 focus:ring-pink-500 focus:border-transparent outline-none text-sm bg-white\"\r\n                        >\r\n                            {yearOptions.map(year => (\r\n                                <option key={year} value={year}>{year}</option>\r\n                            ))}\r\n                        </select>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Filters and List */}\r\n            <div className=\"bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden\">\r\n                <div className=\"p-4 sm:p-6 border-b border-gray-100 flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4\">\r\n                    <div className=\"flex bg-gray-50 p-1 rounded-xl w-full sm:w-auto\">\r\n                        <button\r\n                            onClick={() => setActiveTab('all')}\r\n                            className={`flex-1 sm:flex-none px-4 py-2 rounded-lg text-sm font-bold transition-all ${activeTab === 'all' ? 'bg-white text-gray-900 shadow-sm' : 'text-gray-500 hover:text-gray-700'\r\n                                }`}\r\n                        >\r\n                            Todos\r\n                        </button>\r\n                        <button\r\n                            onClick={() => setActiveTab('income')}\r\n                            className={`flex-1 sm:flex-none px-4 py-2 rounded-lg text-sm font-bold transition-all ${activeTab === 'income' ? 'bg-white text-green-600 shadow-sm' : 'text-gray-500 hover:text-gray-700'\r\n                                }`}\r\n                        >\r\n                            Receitas\r\n                        </button>\r\n                        <button\r\n                            onClick={() => setActiveTab('expense')}\r\n                            className={`flex-1 sm:flex-none px-4 py-2 rounded-lg text-sm font-bold transition-all ${activeTab === 'expense' ? 'bg-white text-red-600 shadow-sm' : 'text-gray-500 hover:text-gray-700'\r\n                                }`}\r\n                        >\r\n                            Despesas\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n\r\n                <Table\r\n                    data={filteredRecords}\r\n                    emptyMessage=\"Nenhum registro encontrado.\"\r\n                    columns={[\r\n                        {\r\n                            header: 'Data',\r\n                            accessor: (r: FinancialRecord) => (\r\n                                <span className=\"text-gray-500\">{formatDateToBR(r.date)}</span>\r\n                            )\r\n                        },\r\n                        {\r\n                            header: 'Descri├º├úo',\r\n                            accessor: (r: FinancialRecord) => (\r\n                                <div className=\"max-w-[150px] sm:max-w-none\">\r\n                                    <p className=\"font-bold text-gray-900 truncate\">{r.description}</p>\r\n                                    <p className=\"text-xs text-gray-400 uppercase tracking-tighter\">{r.category}</p>\r\n                                </div>\r\n                            )\r\n                        },\r\n                        {\r\n                            header: 'M├®todo',\r\n                            accessor: (r: FinancialRecord) => (\r\n                                <span className=\"text-xs font-medium text-gray-500 uppercase\">\r\n                                    {getPaymentMethodLabel(r.paymentMethod || 'pix')}\r\n                                </span>\r\n                            )\r\n                        },\r\n                        {\r\n                            header: 'Tipo',\r\n                            accessor: (r: FinancialRecord) => (\r\n                                <span className={`px-2 py-1 rounded-full text-[10px] font-bold uppercase ${r.type === 'income' ? 'bg-green-100 text-green-700' : 'bg-red-100 text-red-700'\r\n                                    }`}>\r\n                                    {r.type === 'income' ? 'Receita' : 'Despesa'}\r\n                                </span>\r\n                            )\r\n                        },\r\n                        {\r\n                            header: 'Valor',\r\n                            accessor: (r: FinancialRecord) => (\r\n                                <span className={`font-bold ${r.type === 'income' ? 'text-green-600' : 'text-red-600'}`}>\r\n                                    {r.type === 'income' ? '+' : '-'} {formatCurrency(r.value)}\r\n                                </span>\r\n                            )\r\n                        },\r\n                        {\r\n                            header: '',\r\n                            accessor: (r: FinancialRecord) => (\r\n                                <button\r\n                                    onClick={() => handleDelete(r.id)}\r\n                                    className=\"p-2 text-gray-300 hover:text-red-500 transition-colors\"\r\n                                >\r\n                                    <Trash2 className=\"w-4 h-4\" />\r\n                                </button>\r\n                            ),\r\n                            className: 'text-right'\r\n                        }\r\n                    ]}\r\n                />\r\n            </div>\r\n\r\n            {/* Modal Form */}\r\n            <Modal\r\n                isOpen={showForm}\r\n                onClose={() => setShowForm(false)}\r\n                title=\"Novo Registro Financeiro\"\r\n            >\r\n                <form onSubmit={handleSubmit} className=\"p-6 space-y-4\">\r\n                    <div>\r\n                        <label className=\"block text-sm font-medium text-gray-700 mb-1\">Tipo *</label>\r\n                        <div className=\"flex bg-gray-100 p-1 rounded-xl\">\r\n                            <button\r\n                                type=\"button\"\r\n                                onClick={() => setFormData({ ...formData, type: 'income', category: '' })}\r\n                                className={`flex-1 py-2 rounded-lg text-sm font-bold transition-all ${formData.type === 'income' ? 'bg-white text-green-600 shadow-sm' : 'text-gray-500'\r\n                                    }`}\r\n                            >\r\n                                Receita\r\n                            </button>\r\n                            <button\r\n                                type=\"button\"\r\n                                onClick={() => setFormData({ ...formData, type: 'expense', category: '' })}\r\n                                className={`flex-1 py-2 rounded-lg text-sm font-bold transition-all ${formData.type === 'expense' ? 'bg-white text-red-600 shadow-sm' : 'text-gray-500'\r\n                                    }`}\r\n                            >\r\n                                Despesa\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div>\r\n                        <label className=\"block text-sm font-medium text-gray-700 mb-1\">Categoria *</label>\r\n                        <select\r\n                            value={formData.category}\r\n                            onChange={(e) => setFormData({ ...formData, category: e.target.value })}\r\n                            className=\"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-pink-500 focus:border-transparent outline-none\"\r\n                            required\r\n                        >\r\n                            <option value=\"\">Selecione uma categoria</option>\r\n                            {(formData.type === 'income' ? INCOME_CATEGORIES : EXPENSE_CATEGORIES).map((cat) => (\r\n                                <option key={cat} value={cat}>{cat}</option>\r\n                            ))}\r\n                        </select>\r\n                    </div>\r\n\r\n                    <div>\r\n                        <label className=\"block text-sm font-medium text-gray-700 mb-1\">Descri├º├úo *</label>\r\n                        <input\r\n                            type=\"text\"\r\n                            value={formData.description}\r\n                            onChange={(e) => setFormData({ ...formData, description: e.target.value })}\r\n                            className=\"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-pink-500 focus:border-transparent outline-none\"\r\n                            placeholder=\"Descreva o registro\"\r\n                            required\r\n                        />\r\n                    </div>\r\n\r\n                    <div className=\"grid grid-cols-2 gap-4\">\r\n                        <div>\r\n                            <label className=\"block text-sm font-medium text-gray-700 mb-1\">Valor *</label>\r\n                            <input\r\n                                type=\"number\"\r\n                                step=\"0.01\"\r\n                                value={formData.value}\r\n                                onChange={(e) => setFormData({ ...formData, value: e.target.value })}\r\n                                className=\"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-pink-500 focus:border-transparent outline-none\"\r\n                                placeholder=\"0,00\"\r\n                                required\r\n                            />\r\n                        </div>\r\n                        <div>\r\n                            <label className=\"block text-sm font-medium text-gray-700 mb-1\">Data *</label>\r\n                            <input\r\n                                type=\"date\"\r\n                                value={formData.date}\r\n                                onChange={(e) => setFormData({ ...formData, date: e.target.value })}\r\n                                className=\"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-pink-500 focus:border-transparent outline-none\"\r\n                                required\r\n                            />\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div>\r\n                        <label className=\"block text-sm font-medium text-gray-700 mb-1\">Forma de Pagamento</label>\r\n                        <select\r\n                            value={formData.paymentMethod}\r\n                            onChange={(e) => setFormData({ ...formData, paymentMethod: e.target.value as PaymentMethod })}\r\n                            className=\"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-pink-500 focus:border-transparent outline-none\"\r\n                            required\r\n                        >\r\n                            <option value=\"pix\">PIX</option>\r\n                            <option value=\"cash\">Dinheiro</option>\r\n                            <option value=\"card\">Cart├úo</option>\r\n                        </select>\r\n                    </div>\r\n\r\n                    <div className=\"flex gap-3 pt-4\">\r\n                        <button\r\n                            type=\"submit\"\r\n                            className=\"flex-1 py-3 gradient-bg text-white font-semibold rounded-xl hover:opacity-90 transition-all shadow-md\"\r\n                        >\r\n                            Salvar Registro\r\n                        </button>\r\n                        <button\r\n                            type=\"button\"\r\n                            onClick={() => setShowForm(false)}\r\n                            className=\"px-6 py-3 border border-gray-200 rounded-xl hover:bg-gray-50 transition-all text-gray-600 font-medium\"\r\n                        >\r\n                            Cancelar\r\n                        </button>\r\n                    </div>\r\n                </form>\r\n            </Modal>\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Dev\\workspace\\src\\sections\\Login.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Dev\\workspace\\src\\sections\\Reports.tsx","messages":[{"ruleId":"react-hooks/preserve-manual-memoization","severity":2,"message":"Compilation Skipped: Existing memoization could not be preserved\n\nReact Compiler has skipped optimizing this component because the existing manual memoization could not be preserved. The inferred dependencies did not match the manually specified dependencies, which could cause the value to change more or less frequently than expected. The inferred dependency was `isSelectedMonth`, but the source dependencies were [services, appointments, selectedMonth, selectedYear]. Inferred different dependency than source.\n\nC:\\Dev\\workspace\\src\\sections\\Reports.tsx:41:34\n  39 |\n  40 |     // Calculate service popularity\n> 41 |     const serviceStats = useMemo(() => services.map((service: Service) => {\n     |                                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 42 |         const count = appointments.reduce((acc: number, apt: Appointment) => {\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 43 |             return acc + (isSelectedMonth(apt.date) ? apt.services.filter(s => s.id === service.id).length : 0);\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 44 |         }, 0);\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 45 |         return { ...service, count };\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 46 |     }).sort((a: any, b: any) => b.count - a.count), [services, appointments, selectedMonth, selectedYear]);\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ Could not preserve existing manual memoization\n  47 |\n  48 |     // Calculate client frequency\n  49 |     const topClients = useMemo(() => [...clients]","line":41,"column":34,"nodeType":null,"endLine":46,"endColumn":51},{"ruleId":"react-hooks/preserve-manual-memoization","severity":2,"message":"Compilation Skipped: Existing memoization could not be preserved\n\nReact Compiler has skipped optimizing this component because the existing manual memoization could not be preserved. The inferred dependencies did not match the manually specified dependencies, which could cause the value to change more or less frequently than expected. The inferred dependency was `isSelectedMonth`, but the source dependencies were [services, appointments, selectedMonth, selectedYear]. Inferred different dependency than source.\n\nC:\\Dev\\workspace\\src\\sections\\Reports.tsx:41:34\n  39 |\n  40 |     // Calculate service popularity\n> 41 |     const serviceStats = useMemo(() => services.map((service: Service) => {\n     |                                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 42 |         const count = appointments.reduce((acc: number, apt: Appointment) => {\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 43 |             return acc + (isSelectedMonth(apt.date) ? apt.services.filter(s => s.id === service.id).length : 0);\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 44 |         }, 0);\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 45 |         return { ...service, count };\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 46 |     }).sort((a: any, b: any) => b.count - a.count), [services, appointments, selectedMonth, selectedYear]);\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ Could not preserve existing manual memoization\n  47 |\n  48 |     // Calculate client frequency\n  49 |     const topClients = useMemo(() => [...clients]","line":41,"column":34,"nodeType":null,"endLine":46,"endColumn":51},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":46,"column":17,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":46,"endColumn":20,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2151,2154],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2151,2154],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":46,"column":25,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":46,"endColumn":28,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2159,2162],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2159,2162],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useMemo has a missing dependency: 'isSelectedMonth'. Either include it or remove the dependency array.","line":46,"column":53,"nodeType":"ArrayExpression","endLine":46,"endColumn":106,"suggestions":[{"desc":"Update the dependencies array to be: [services, appointments, isSelectedMonth]","fix":{"range":[2187,2240],"text":"[services, appointments, isSelectedMonth]"}}]},{"ruleId":"react-hooks/preserve-manual-memoization","severity":2,"message":"Compilation Skipped: Existing memoization could not be preserved\n\nReact Compiler has skipped optimizing this component because the existing manual memoization could not be preserved. The inferred dependencies did not match the manually specified dependencies, which could cause the value to change more or less frequently than expected. The inferred dependency was `isSelectedMonth`, but the source dependencies were [financialRecords, selectedMonth, selectedYear]. Inferred different dependency than source.\n\nC:\\Dev\\workspace\\src\\sections\\Reports.tsx:54:39\n  52 |\n  53 |     // Revenue by category (filtered by selected month)\n> 54 |     const revenueByCategory = useMemo(() => financialRecords\n     |                                       ^^^^^^^^^^^^^^^^^^^^^^\n> 55 |         .filter((r: FinancialRecord) => r.type === 'income' && isSelectedMonth(r.date))\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 56 |         .reduce((acc: Record<string, number>, r: FinancialRecord) => {\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 57 |             acc[r.category] = (acc[r.category] || 0) + r.value;\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 58 |             return acc;\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 59 |         }, {}), [financialRecords, selectedMonth, selectedYear]);\n     | ^^^^^^^^^^^^^^^ Could not preserve existing manual memoization\n  60 |\n  61 |     // Expenses by category (filtered by selected month)\n  62 |     const expensesByCategory = useMemo(() => financialRecords","line":54,"column":39,"nodeType":null,"endLine":59,"endColumn":15},{"ruleId":"react-hooks/preserve-manual-memoization","severity":2,"message":"Compilation Skipped: Existing memoization could not be preserved\n\nReact Compiler has skipped optimizing this component because the existing manual memoization could not be preserved. The inferred dependencies did not match the manually specified dependencies, which could cause the value to change more or less frequently than expected. The inferred dependency was `isSelectedMonth`, but the source dependencies were [financialRecords, selectedMonth, selectedYear]. Inferred different dependency than source.\n\nC:\\Dev\\workspace\\src\\sections\\Reports.tsx:54:39\n  52 |\n  53 |     // Revenue by category (filtered by selected month)\n> 54 |     const revenueByCategory = useMemo(() => financialRecords\n     |                                       ^^^^^^^^^^^^^^^^^^^^^^\n> 55 |         .filter((r: FinancialRecord) => r.type === 'income' && isSelectedMonth(r.date))\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 56 |         .reduce((acc: Record<string, number>, r: FinancialRecord) => {\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 57 |             acc[r.category] = (acc[r.category] || 0) + r.value;\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 58 |             return acc;\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 59 |         }, {}), [financialRecords, selectedMonth, selectedYear]);\n     | ^^^^^^^^^^^^^^^ Could not preserve existing manual memoization\n  60 |\n  61 |     // Expenses by category (filtered by selected month)\n  62 |     const expensesByCategory = useMemo(() => financialRecords","line":54,"column":39,"nodeType":null,"endLine":59,"endColumn":15},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useMemo has a missing dependency: 'isSelectedMonth'. Either include it or remove the dependency array.","line":59,"column":17,"nodeType":"ArrayExpression","endLine":59,"endColumn":64,"suggestions":[{"desc":"Update the dependencies array to be: [financialRecords, isSelectedMonth]","fix":{"range":[2811,2858],"text":"[financialRecords, isSelectedMonth]"}}]},{"ruleId":"react-hooks/preserve-manual-memoization","severity":2,"message":"Compilation Skipped: Existing memoization could not be preserved\n\nReact Compiler has skipped optimizing this component because the existing manual memoization could not be preserved. The inferred dependencies did not match the manually specified dependencies, which could cause the value to change more or less frequently than expected. The inferred dependency was `isSelectedMonth`, but the source dependencies were [financialRecords, selectedMonth, selectedYear]. Inferred different dependency than source.\n\nC:\\Dev\\workspace\\src\\sections\\Reports.tsx:62:40\n  60 |\n  61 |     // Expenses by category (filtered by selected month)\n> 62 |     const expensesByCategory = useMemo(() => financialRecords\n     |                                        ^^^^^^^^^^^^^^^^^^^^^^\n> 63 |         .filter((r: FinancialRecord) => r.type === 'expense' && isSelectedMonth(r.date))\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 64 |         .reduce((acc: Record<string, number>, r: FinancialRecord) => {\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 65 |             acc[r.category] = (acc[r.category] || 0) + r.value;\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 66 |             return acc;\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 67 |         }, {}), [financialRecords, selectedMonth, selectedYear]);\n     | ^^^^^^^^^^^^^^^ Could not preserve existing manual memoization\n  68 |\n  69 |     // Calculate commissions by staff (filtered by selected month)\n  70 |     const staffCommissions = useMemo(() => staff.map((member: Staff) => {","line":62,"column":40,"nodeType":null,"endLine":67,"endColumn":15},{"ruleId":"react-hooks/preserve-manual-memoization","severity":2,"message":"Compilation Skipped: Existing memoization could not be preserved\n\nReact Compiler has skipped optimizing this component because the existing manual memoization could not be preserved. The inferred dependencies did not match the manually specified dependencies, which could cause the value to change more or less frequently than expected. The inferred dependency was `isSelectedMonth`, but the source dependencies were [financialRecords, selectedMonth, selectedYear]. Inferred different dependency than source.\n\nC:\\Dev\\workspace\\src\\sections\\Reports.tsx:62:40\n  60 |\n  61 |     // Expenses by category (filtered by selected month)\n> 62 |     const expensesByCategory = useMemo(() => financialRecords\n     |                                        ^^^^^^^^^^^^^^^^^^^^^^\n> 63 |         .filter((r: FinancialRecord) => r.type === 'expense' && isSelectedMonth(r.date))\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 64 |         .reduce((acc: Record<string, number>, r: FinancialRecord) => {\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 65 |             acc[r.category] = (acc[r.category] || 0) + r.value;\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 66 |             return acc;\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 67 |         }, {}), [financialRecords, selectedMonth, selectedYear]);\n     | ^^^^^^^^^^^^^^^ Could not preserve existing manual memoization\n  68 |\n  69 |     // Calculate commissions by staff (filtered by selected month)\n  70 |     const staffCommissions = useMemo(() => staff.map((member: Staff) => {","line":62,"column":40,"nodeType":null,"endLine":67,"endColumn":15},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useMemo has a missing dependency: 'isSelectedMonth'. Either include it or remove the dependency array.","line":67,"column":17,"nodeType":"ArrayExpression","endLine":67,"endColumn":64,"suggestions":[{"desc":"Update the dependencies array to be: [financialRecords, isSelectedMonth]","fix":{"range":[3253,3300],"text":"[financialRecords, isSelectedMonth]"}}]},{"ruleId":"react-hooks/preserve-manual-memoization","severity":2,"message":"Compilation Skipped: Existing memoization could not be preserved\n\nReact Compiler has skipped optimizing this component because the existing manual memoization could not be preserved. The inferred dependencies did not match the manually specified dependencies, which could cause the value to change more or less frequently than expected. The inferred dependency was `isSelectedMonth`, but the source dependencies were [staff, appointments, selectedMonth, selectedYear]. Inferred different dependency than source.\n\nC:\\Dev\\workspace\\src\\sections\\Reports.tsx:70:38\n  68 |\n  69 |     // Calculate commissions by staff (filtered by selected month)\n> 70 |     const staffCommissions = useMemo(() => staff.map((member: Staff) => {\n     |                                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 71 |         const completedApts = appointments.filter((apt: Appointment) =>\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 72 |             apt.staffId === member.id &&\n     ÔÇª\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 83 |         };\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 84 |     }).sort((a, b) => b.totalSales - a.totalSales), [staff, appointments, selectedMonth, selectedYear]);\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ Could not preserve existing manual memoization\n  85 |\n  86 |     const commissionFooter = (\n  87 |         <tr className=\"bg-gray-50 font-bold text-gray-900 border-t border-gray-100\">","line":70,"column":38,"nodeType":null,"endLine":84,"endColumn":51},{"ruleId":"react-hooks/preserve-manual-memoization","severity":2,"message":"Compilation Skipped: Existing memoization could not be preserved\n\nReact Compiler has skipped optimizing this component because the existing manual memoization could not be preserved. The inferred dependencies did not match the manually specified dependencies, which could cause the value to change more or less frequently than expected. The inferred dependency was `isSelectedMonth`, but the source dependencies were [staff, appointments, selectedMonth, selectedYear]. Inferred different dependency than source.\n\nC:\\Dev\\workspace\\src\\sections\\Reports.tsx:70:38\n  68 |\n  69 |     // Calculate commissions by staff (filtered by selected month)\n> 70 |     const staffCommissions = useMemo(() => staff.map((member: Staff) => {\n     |                                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 71 |         const completedApts = appointments.filter((apt: Appointment) =>\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 72 |             apt.staffId === member.id &&\n     ÔÇª\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 83 |         };\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 84 |     }).sort((a, b) => b.totalSales - a.totalSales), [staff, appointments, selectedMonth, selectedYear]);\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ Could not preserve existing manual memoization\n  85 |\n  86 |     const commissionFooter = (\n  87 |         <tr className=\"bg-gray-50 font-bold text-gray-900 border-t border-gray-100\">","line":70,"column":38,"nodeType":null,"endLine":84,"endColumn":51},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useMemo has a missing dependency: 'isSelectedMonth'. Either include it or remove the dependency array.","line":84,"column":53,"nodeType":"ArrayExpression","endLine":84,"endColumn":103,"suggestions":[{"desc":"Update the dependencies array to be: [staff, appointments, isSelectedMonth]","fix":{"range":[4045,4095],"text":"[staff, appointments, isSelectedMonth]"}}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":291,"column":65,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":291,"endColumn":68,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[15782,15785],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[15782,15785],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":292,"column":58,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":292,"endColumn":61,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[15909,15912],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[15909,15912],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":293,"column":61,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":293,"endColumn":64,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[16003,16006],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[16003,16006],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":294,"column":64,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":294,"endColumn":67,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[16112,16115],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[16112,16115],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":295,"column":65,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":295,"endColumn":68,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[16256,16259],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[16256,16259],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":296,"column":60,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":296,"endColumn":63,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[16356,16359],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[16356,16359],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":16,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useMemo, useState } from 'react';\r\nimport { useData } from '../contexts/DataContext';\r\nimport { BarChart3, Users, Calendar, DollarSign, TrendingUp, PieChart, RefreshCw } from 'lucide-react';\r\nimport { StatCard } from '../components/shared/StatCard';\r\nimport { Table } from '../components/shared/Table';\r\nimport { formatCurrency } from '../utils/currency';\r\nimport type { Service, Appointment, FinancialRecord, Staff } from '../types';\r\n\r\nexport function Reports() {\r\n    const { clients, services, appointments, financialRecords, staff, syncVisitCounts, dashboardStats } = useData();\r\n\r\n    // Get current month/year for initial state\r\n    const now = new Date();\r\n    const [selectedMonth, setSelectedMonth] = useState(now.getMonth() + 1);\r\n    const [selectedYear, setSelectedYear] = useState(now.getFullYear());\r\n\r\n    // Helper function to check if a date matches selected month/year\r\n    const isSelectedMonth = (dateString: string) => {\r\n        const [year, month] = dateString.split('-').map(Number);\r\n        return year === selectedYear && month === selectedMonth;\r\n    };\r\n\r\n    // Generate year options (current year and previous 2 years)\r\n    const yearOptions = Array.from({ length: 3 }, (_, i) => now.getFullYear() - i);\r\n    const monthOptions = [\r\n        { value: 1, label: 'Janeiro' },\r\n        { value: 2, label: 'Fevereiro' },\r\n        { value: 3, label: 'Mar├ºo' },\r\n        { value: 4, label: 'Abril' },\r\n        { value: 5, label: 'Maio' },\r\n        { value: 6, label: 'Junho' },\r\n        { value: 7, label: 'Julho' },\r\n        { value: 8, label: 'Agosto' },\r\n        { value: 9, label: 'Setembro' },\r\n        { value: 10, label: 'Outubro' },\r\n        { value: 11, label: 'Novembro' },\r\n        { value: 12, label: 'Dezembro' },\r\n    ];\r\n\r\n    // Calculate service popularity\r\n    const serviceStats = useMemo(() => services.map((service: Service) => {\r\n        const count = appointments.reduce((acc: number, apt: Appointment) => {\r\n            return acc + (isSelectedMonth(apt.date) ? apt.services.filter(s => s.id === service.id).length : 0);\r\n        }, 0);\r\n        return { ...service, count };\r\n    }).sort((a: any, b: any) => b.count - a.count), [services, appointments, selectedMonth, selectedYear]);\r\n\r\n    // Calculate client frequency\r\n    const topClients = useMemo(() => [...clients]\r\n        .sort((a, b) => b.totalVisits - a.totalVisits)\r\n        .slice(0, 5), [clients]);\r\n\r\n    // Revenue by category (filtered by selected month)\r\n    const revenueByCategory = useMemo(() => financialRecords\r\n        .filter((r: FinancialRecord) => r.type === 'income' && isSelectedMonth(r.date))\r\n        .reduce((acc: Record<string, number>, r: FinancialRecord) => {\r\n            acc[r.category] = (acc[r.category] || 0) + r.value;\r\n            return acc;\r\n        }, {}), [financialRecords, selectedMonth, selectedYear]);\r\n\r\n    // Expenses by category (filtered by selected month)\r\n    const expensesByCategory = useMemo(() => financialRecords\r\n        .filter((r: FinancialRecord) => r.type === 'expense' && isSelectedMonth(r.date))\r\n        .reduce((acc: Record<string, number>, r: FinancialRecord) => {\r\n            acc[r.category] = (acc[r.category] || 0) + r.value;\r\n            return acc;\r\n        }, {}), [financialRecords, selectedMonth, selectedYear]);\r\n\r\n    // Calculate commissions by staff (filtered by selected month)\r\n    const staffCommissions = useMemo(() => staff.map((member: Staff) => {\r\n        const completedApts = appointments.filter((apt: Appointment) =>\r\n            apt.staffId === member.id &&\r\n            apt.status === 'completed' &&\r\n            isSelectedMonth(apt.date)\r\n        );\r\n        const totalSales = completedApts.reduce((sum: number, apt: Appointment) => sum + apt.totalValue, 0);\r\n        const commissionAmount = (totalSales * member.commission) / 100;\r\n        return {\r\n            ...member,\r\n            totalSales,\r\n            commissionAmount,\r\n            count: completedApts.length\r\n        };\r\n    }).sort((a, b) => b.totalSales - a.totalSales), [staff, appointments, selectedMonth, selectedYear]);\r\n\r\n    const commissionFooter = (\r\n        <tr className=\"bg-gray-50 font-bold text-gray-900 border-t border-gray-100\">\r\n            <td colSpan={3} className=\"px-6 py-4\">Total Geral</td>\r\n            <td className=\"px-6 py-4\">\r\n                {formatCurrency(staffCommissions.reduce((sum: number, s) => sum + s.totalSales, 0))}\r\n            </td>\r\n            <td className=\"px-6 py-4\"></td>\r\n            <td className=\"px-6 py-4 text-pink-600\">\r\n                {formatCurrency(staffCommissions.reduce((sum: number, s) => sum + s.commissionAmount, 0))}\r\n            </td>\r\n        </tr>\r\n    );\r\n\r\n    return (\r\n        <div className=\"space-y-6\">\r\n            <div className=\"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4\">\r\n                <div>\r\n                    <h1 className=\"text-2xl sm:text-3xl font-bold text-gray-900\">Relat├│rios e M├®tricas</h1>\r\n                    <p className=\"text-gray-500 mt-1\">Vis├úo geral do desempenho do seu neg├│cio</p>\r\n                </div>\r\n                <div className=\"flex flex-col sm:flex-row gap-3\">\r\n                    <button\r\n                        onClick={() => syncVisitCounts()}\r\n                        className=\"flex items-center gap-2 px-4 py-2 bg-pink-100 text-pink-600 rounded-xl hover:bg-pink-200 transition-colors\"\r\n                    >\r\n                        <RefreshCw className=\"w-4 h-4\" />\r\n                        <span className=\"text-sm font-semibold\">Sincronizar Visitas</span>\r\n                    </button>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Month/Year Selector */}\r\n            <div className=\"bg-white p-4 rounded-xl shadow-sm border border-gray-100\">\r\n                <div className=\"flex flex-col sm:flex-row items-start sm:items-center gap-4\">\r\n                    <div className=\"flex items-center gap-2\">\r\n                        <Calendar className=\"w-5 h-5 text-gray-500\" />\r\n                        <span className=\"text-sm font-medium text-gray-700\">Per├¡odo:</span>\r\n                    </div>\r\n                    <div className=\"flex gap-3 flex-1\">\r\n                        <select\r\n                            value={selectedMonth}\r\n                            onChange={(e) => setSelectedMonth(Number(e.target.value))}\r\n                            className=\"flex-1 sm:flex-none px-4 py-2 border border-gray-200 rounded-xl focus:ring-2 focus:ring-pink-500 focus:border-transparent outline-none text-sm\"\r\n                        >\r\n                            {monthOptions.map(month => (\r\n                                <option key={month.value} value={month.value}>{month.label}</option>\r\n                            ))}\r\n                        </select>\r\n                        <select\r\n                            value={selectedYear}\r\n                            onChange={(e) => setSelectedYear(Number(e.target.value))}\r\n                            className=\"px-4 py-2 border border-gray-200 rounded-xl focus:ring-2 focus:ring-pink-500 focus:border-transparent outline-none text-sm\"\r\n                        >\r\n                            {yearOptions.map(year => (\r\n                                <option key={year} value={year}>{year}</option>\r\n                            ))}\r\n                        </select>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Summary Cards */}\r\n            <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 sm:gap-6\">\r\n                <StatCard\r\n                    title=\"Total de Clientes\"\r\n                    value={clients.length}\r\n                    icon={Users}\r\n                    color=\"bg-blue-500\"\r\n                />\r\n                <StatCard\r\n                    title=\"Total de Agendamentos\"\r\n                    value={appointments.length}\r\n                    icon={Calendar}\r\n                    color=\"bg-purple-500\"\r\n                />\r\n                <StatCard\r\n                    title=\"Receita Total\"\r\n                    value={formatCurrency(dashboardStats.monthlyRevenue)}\r\n                    icon={TrendingUp}\r\n                    color=\"bg-green-500\"\r\n                />\r\n                <StatCard\r\n                    title=\"Lucro Total\"\r\n                    value={formatCurrency(dashboardStats.monthlyProfit)}\r\n                    icon={DollarSign}\r\n                    color=\"bg-pink-500\"\r\n                />\r\n            </div>\r\n\r\n            <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\r\n                {/* Popular Services */}\r\n                <div className=\"bg-white p-6 rounded-2xl shadow-sm border border-gray-100\">\r\n                    <h2 className=\"text-xl font-semibold text-gray-900 flex items-center gap-2 mb-4\">\r\n                        <BarChart3 className=\"w-5 h-5 text-pink-500\" />\r\n                        Servi├ºos Mais Populares\r\n                    </h2>\r\n                    {serviceStats.length === 0 ? (\r\n                        <p className=\"text-gray-500 text-center py-8\">Nenhum dado dispon├¡vel</p>\r\n                    ) : (\r\n                        <div className=\"space-y-4\">\r\n                            {serviceStats.slice(0, 5).map((service, index) => (\r\n                                <div key={service.id} className=\"flex items-center gap-4\">\r\n                                    <span className=\"text-lg font-bold text-gray-400 w-6\">#{index + 1}</span>\r\n                                    <div className=\"flex-1\">\r\n                                        <div className=\"flex justify-between items-center mb-1\">\r\n                                            <span className=\"font-medium text-gray-900\">{service.name}</span>\r\n                                            <span className=\"text-sm text-gray-500\">{service.count} agendamentos</span>\r\n                                        </div>\r\n                                        <div className=\"h-2 bg-gray-100 rounded-full overflow-hidden\">\r\n                                            <div\r\n                                                className=\"h-full rounded-full transition-all\"\r\n                                                style={{\r\n                                                    width: `${(service.count / Math.max(...serviceStats.map(s => s.count), 1)) * 100}%`,\r\n                                                    backgroundColor: service.color\r\n                                                }}\r\n                                            />\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            ))}\r\n                        </div>\r\n                    )}\r\n                </div>\r\n\r\n                {/* Top Clients */}\r\n                <div className=\"bg-white p-6 rounded-2xl shadow-sm border border-gray-100\">\r\n                    <h2 className=\"text-xl font-semibold text-gray-900 flex items-center gap-2 mb-4\">\r\n                        <Users className=\"w-5 h-5 text-blue-500\" />\r\n                        Clientes Mais Frequentes\r\n                    </h2>\r\n                    {topClients.length === 0 ? (\r\n                        <p className=\"text-gray-500 text-center py-8\">Nenhum dado dispon├¡vel</p>\r\n                    ) : (\r\n                        <div className=\"space-y-3\">\r\n                            {topClients.map((client, index) => (\r\n                                <div key={client.id} className=\"flex items-center gap-4 p-3 bg-gray-50 rounded-xl\">\r\n                                    <div className={`w-10 h-10 rounded-full flex items-center justify-center text-white font-bold ${index === 0 ? 'bg-yellow-500' : index === 1 ? 'bg-gray-400' : index === 2 ? 'bg-amber-600' : 'bg-gray-300'\r\n                                        }`}>\r\n                                        {index + 1}\r\n                                    </div>\r\n                                    <div className=\"flex-1\">\r\n                                        <p className=\"font-medium text-gray-900\">{client.name}</p>\r\n                                        <p className=\"text-sm text-gray-500\">{client.phone}</p>\r\n                                    </div>\r\n                                    <span className=\"bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-sm font-medium\">\r\n                                        {client.totalVisits} visitas\r\n                                    </span>\r\n                                </div>\r\n                            ))}\r\n                        </div>\r\n                    )}\r\n                </div>\r\n\r\n                {/* Revenue by Category */}\r\n                <div className=\"bg-white p-6 rounded-2xl shadow-sm border border-gray-100\">\r\n                    <h2 className=\"text-xl font-semibold text-gray-900 flex items-center gap-2 mb-4\">\r\n                        <PieChart className=\"w-5 h-5 text-green-500\" />\r\n                        Receitas por Categoria\r\n                    </h2>\r\n                    {Object.keys(revenueByCategory).length === 0 ? (\r\n                        <p className=\"text-gray-500 text-center py-8\">Nenhum dado dispon├¡vel</p>\r\n                    ) : (\r\n                        <div className=\"space-y-3\">\r\n                            {Object.entries(revenueByCategory).map(([category, value]) => (\r\n                                <div key={category} className=\"flex items-center justify-between p-3 bg-green-50 rounded-xl font-medium\">\r\n                                    <span className=\"text-gray-900\">{category}</span>\r\n                                    <span className=\"text-green-600 font-bold\">{formatCurrency(value)}</span>\r\n                                </div>\r\n                            ))}\r\n                        </div>\r\n                    )}\r\n                </div>\r\n\r\n                {/* Expenses by Category */}\r\n                <div className=\"bg-white p-6 rounded-2xl shadow-sm border border-gray-100\">\r\n                    <h2 className=\"text-xl font-semibold text-gray-900 flex items-center gap-2 mb-4\">\r\n                        <PieChart className=\"w-5 h-5 text-red-500\" />\r\n                        Despesas por Categoria\r\n                    </h2>\r\n                    {Object.keys(expensesByCategory).length === 0 ? (\r\n                        <p className=\"text-gray-500 text-center py-8\">Nenhum dado dispon├¡vel</p>\r\n                    ) : (\r\n                        <div className=\"space-y-3\">\r\n                            {Object.entries(expensesByCategory).map(([category, value]) => (\r\n                                <div key={category} className=\"flex items-center justify-between p-3 bg-red-50 rounded-xl font-medium\">\r\n                                    <span className=\"text-gray-900\">{category}</span>\r\n                                    <span className=\"text-red-600 font-bold\">{formatCurrency(value)}</span>\r\n                                </div>\r\n                            ))}\r\n                        </div>\r\n                    )}\r\n                </div>\r\n            </div>\r\n\r\n            {/* Staff Commissions */}\r\n            <div className=\"space-y-4\">\r\n                <h2 className=\"text-xl font-semibold text-gray-900 flex items-center gap-2\">\r\n                    <DollarSign className=\"w-5 h-5 text-yellow-500\" />\r\n                    Comiss├Áes por Profissional\r\n                </h2>\r\n                <Table\r\n                    data={staffCommissions}\r\n                    emptyMessage=\"Nenhum dado dispon├¡vel. Complete agendamentos para ver o desempenho.\"\r\n                    footer={commissionFooter}\r\n                    columns={[\r\n                        { header: 'Profissional', accessor: (m: any) => <span className=\"font-bold text-gray-900\">{m.name}</span> },\r\n                        { header: 'Cargo', accessor: (m: any) => <span>{m.role}</span> },\r\n                        { header: 'Servi├ºos', accessor: (m: any) => <span>{m.count} conclu├¡dos</span> },\r\n                        { header: 'Venda Total', accessor: (m: any) => <span className=\"font-medium\">{formatCurrency(m.totalSales)}</span> },\r\n                        { header: 'Comiss├úo (%)', accessor: (m: any) => <span>{m.commission}%</span> },\r\n                        { header: 'A Pagar', accessor: (m: any) => <span className=\"font-bold text-pink-600\">{formatCurrency(m.commissionAmount)}</span>, className: 'text-right' },\r\n                    ]}\r\n                />\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Dev\\workspace\\src\\sections\\Services.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Dev\\workspace\\src\\sections\\Staff.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Dev\\workspace\\src\\sections\\Users.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Dev\\workspace\\src\\sections\\appointments\\AppointmentCard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Dev\\workspace\\src\\sections\\appointments\\AppointmentForm.tsx","messages":[{"ruleId":"react-hooks/preserve-manual-memoization","severity":2,"message":"Compilation Skipped: Existing memoization could not be preserved\n\nReact Compiler has skipped optimizing this component because the existing manual memoization could not be preserved. The inferred dependencies did not match the manually specified dependencies, which could cause the value to change more or less frequently than expected. The inferred dependency was `getOccupiedStaffAt`, but the source dependencies were [formData.date, formData.time, appointments, editingId]. Inferred different dependency than source.\n\nC:\\Dev\\workspace\\src\\sections\\appointments\\AppointmentForm.tsx:46:44\n  44 |     };\n  45 |\n> 46 |     const occupiedStaffIds = React.useMemo(() => {\n     |                                            ^^^^^^^\n> 47 |         if (!formData.date || !formData.time) return [];\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 48 |         return getOccupiedStaffAt(formData.date, formData.time);\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 49 |     }, [formData.date, formData.time, appointments, editingId]);\n     | ^^^^^^ Could not preserve existing manual memoization\n  50 |\n  51 |     const isSpecificConflict = React.useMemo(() => {\n  52 |         if (!formData.staffId) return false;","line":46,"column":44,"nodeType":null,"endLine":49,"endColumn":6},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook React.useMemo has a missing dependency: 'getOccupiedStaffAt'. Either include it or remove the dependency array.","line":49,"column":8,"nodeType":"ArrayExpression","endLine":49,"endColumn":63,"suggestions":[{"desc":"Update the dependencies array to be: [formData.date, formData.time, getOccupiedStaffAt]","fix":{"range":[1513,1568],"text":"[formData.date, formData.time, getOccupiedStaffAt]"}}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook React.useMemo has a missing dependency: 'getOccupiedStaffAt'. Either include it or remove the dependency array.","line":62,"column":8,"nodeType":"ArrayExpression","endLine":62,"endColumn":70,"suggestions":[{"desc":"Update the dependencies array to be: [formData.date, formData.time, getOccupiedStaffAt, staff]","fix":{"range":[2196,2258],"text":"[formData.date, formData.time, getOccupiedStaffAt, staff]"}}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\r\nimport type { Appointment, AppointmentFormData, Client, Service, Staff } from '../../types';\r\nimport { AlertCircle, Clock, User as UserIcon } from 'lucide-react';\r\n\r\ninterface AppointmentFormProps {\r\n    formData: AppointmentFormData;\r\n    setFormData: (data: AppointmentFormData) => void;\r\n    appointments: Appointment[];\r\n    clients: Client[];\r\n    services: Service[];\r\n    staff: Staff[];\r\n    onSubmit: (e: React.FormEvent) => void;\r\n    onCancel: () => void;\r\n    handleServiceToggle: (serviceId: string) => void;\r\n    formatCurrency: (value: number) => string;\r\n    editingId: string | null;\r\n    TIMES: string[];\r\n}\r\n\r\nexport function AppointmentForm({\r\n    formData,\r\n    setFormData,\r\n    appointments,\r\n    clients,\r\n    services,\r\n    staff,\r\n    onSubmit,\r\n    onCancel,\r\n    handleServiceToggle,\r\n    formatCurrency,\r\n    editingId,\r\n    TIMES\r\n}: AppointmentFormProps) {\r\n    // Check if a specific time is occupied by ANY professional\r\n    const getOccupiedStaffAt = (date: string, time: string) => {\r\n        return appointments\r\n            .filter(apt =>\r\n                apt.id !== editingId &&\r\n                apt.date === date &&\r\n                apt.time === time &&\r\n                apt.status !== 'cancelled'\r\n            )\r\n            .map(apt => apt.staffId);\r\n    };\r\n\r\n    const occupiedStaffIds = React.useMemo(() => {\r\n        if (!formData.date || !formData.time) return [];\r\n        return getOccupiedStaffAt(formData.date, formData.time);\r\n    }, [formData.date, formData.time, appointments, editingId]);\r\n\r\n    const isSpecificConflict = React.useMemo(() => {\r\n        if (!formData.staffId) return false;\r\n        return occupiedStaffIds.includes(formData.staffId);\r\n    }, [formData.staffId, occupiedStaffIds]);\r\n\r\n    // Check if all active staff are busy at this time\r\n    const isTimeFullyOccupied = React.useMemo(() => {\r\n        if (!formData.date || !formData.time) return false;\r\n        const occupiedCount = getOccupiedStaffAt(formData.date, formData.time).length;\r\n        const activeStaffCount = staff.filter(s => s.active).length;\r\n        return occupiedCount >= activeStaffCount && activeStaffCount > 0;\r\n    }, [formData.date, formData.time, appointments, staff, editingId]);\r\n\r\n    return (\r\n        <form onSubmit={onSubmit} className=\"p-6 space-y-4 text-left\">\r\n            {isSpecificConflict && (\r\n                <div className=\"bg-amber-50 border border-amber-200 rounded-xl p-4 flex items-start gap-3 animate-in fade-in slide-in-from-top-2\">\r\n                    <AlertCircle className=\"w-5 h-5 text-amber-500 shrink-0 mt-0.5\" />\r\n                    <div>\r\n                        <p className=\"text-sm font-bold text-amber-800\">Conflito de Hor├írio</p>\r\n                        <p className=\"text-xs text-amber-700\">Este profissional j├í possui outro agendamento neste hor├írio.</p>\r\n                    </div>\r\n                </div>\r\n            )}\r\n\r\n            <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">Cliente *</label>\r\n                <select\r\n                    value={formData.clientId}\r\n                    onChange={(e) => setFormData({ ...formData, clientId: e.target.value })}\r\n                    className=\"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-pink-500 focus:border-transparent outline-none\"\r\n                    required\r\n                >\r\n                    <option value=\"\">Selecione um cliente</option>\r\n                    {clients.map((client) => (\r\n                        <option key={client.id} value={client.id}>{client.name}</option>\r\n                    ))}\r\n                </select>\r\n            </div>\r\n\r\n            <div className=\"grid grid-cols-2 gap-4\">\r\n                <div>\r\n                    <label className=\"block text-sm font-medium text-gray-700 mb-1\">Data *</label>\r\n                    <input\r\n                        type=\"date\"\r\n                        value={formData.date}\r\n                        onChange={(e) => setFormData({ ...formData, date: e.target.value })}\r\n                        className=\"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-pink-500 focus:border-transparent outline-none\"\r\n                        required\r\n                    />\r\n                </div>\r\n                <div>\r\n                    <label className=\"block text-sm font-medium text-gray-700 mb-1\">Hor├írio *</label>\r\n                    <div className=\"relative\">\r\n                        <select\r\n                            value={formData.time}\r\n                            onChange={(e) => setFormData({ ...formData, time: e.target.value })}\r\n                            className={`w-full px-4 py-3 border rounded-xl focus:ring-2 focus:ring-pink-500 focus:border-transparent outline-none appearance-none bg-white ${isTimeFullyOccupied ? 'border-amber-300 bg-amber-50' : 'border-gray-200'}`}\r\n                        >\r\n                            {TIMES.map((time) => {\r\n                                const occupiedCount = getOccupiedStaffAt(formData.date, time).length;\r\n                                const isFull = occupiedCount >= staff.filter(s => s.active).length;\r\n                                return (\r\n                                    <option key={time} value={time}>\r\n                                        {time} {isFull ? '(Ocupado)' : occupiedCount > 0 ? `(${occupiedCount} ocupado)` : ''}\r\n                                    </option>\r\n                                );\r\n                            })}\r\n                        </select>\r\n                        <Clock className={`absolute right-4 top-1/2 transform -translate-y-1/2 w-4 h-4 ${isTimeFullyOccupied ? 'text-amber-500' : 'text-gray-400'} pointer-events-none`} />\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">Profissional *</label>\r\n                <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-2\">\r\n                    {staff.filter(s => s.active).map((member) => {\r\n                        const isBusy = occupiedStaffIds.includes(member.id);\r\n                        return (\r\n                            <button\r\n                                key={member.id}\r\n                                type=\"button\"\r\n                                onClick={() => setFormData({ ...formData, staffId: member.id })}\r\n                                className={`flex items-center gap-3 p-3 rounded-xl border transition-all text-left ${formData.staffId === member.id\r\n                                    ? 'border-pink-500 bg-pink-50 ring-1 ring-pink-500'\r\n                                    : isBusy\r\n                                        ? 'border-amber-100 bg-amber-50/50 opacity-70 grayscale-[0.5]'\r\n                                        : 'border-gray-100 hover:border-pink-200 hover:bg-gray-50'\r\n                                    }`}\r\n                            >\r\n                                <div className={`w-8 h-8 rounded-full flex items-center justify-center shrink-0 ${formData.staffId === member.id ? 'bg-pink-500 text-white' : 'bg-gray-100 text-gray-400'}`}>\r\n                                    <UserIcon className=\"w-4 h-4\" />\r\n                                </div>\r\n                                <div className=\"flex-1 min-w-0\">\r\n                                    <p className={`text-sm font-bold truncate ${formData.staffId === member.id ? 'text-pink-700' : 'text-gray-700'}`}>\r\n                                        {member.name}\r\n                                    </p>\r\n                                    {isBusy && (\r\n                                        <p className=\"text-[10px] text-amber-600 font-bold uppercase tracking-tight\">Ocupada neste hor├írio</p>\r\n                                    )}\r\n                                </div>\r\n                            </button>\r\n                        );\r\n                    })}\r\n                </div>\r\n                <input type=\"hidden\" value={formData.staffId} required name=\"staffId\" />\r\n            </div>\r\n\r\n            <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">Servi├ºos *</label>\r\n                <div className=\"border border-gray-200 rounded-xl p-3 max-h-48 overflow-y-auto\">\r\n                    <div className=\"grid grid-cols-1 gap-2\">\r\n                        {services.filter(s => s.active).map((service) => (\r\n                            <label\r\n                                key={service.id}\r\n                                className={`flex items-center gap-3 p-3 rounded-xl cursor-pointer transition-colors ${formData.serviceIds.includes(service.id)\r\n                                    ? 'bg-pink-50 border border-pink-200'\r\n                                    : 'hover:bg-gray-50 border border-transparent'\r\n                                    }`}\r\n                            >\r\n                                <input\r\n                                    type=\"checkbox\"\r\n                                    checked={formData.serviceIds.includes(service.id)}\r\n                                    onChange={() => handleServiceToggle(service.id)}\r\n                                    className=\"w-4 h-4 text-pink-500 rounded focus:ring-pink-500\"\r\n                                />\r\n                                <div className=\"flex-1\">\r\n                                    <span className=\"text-sm font-medium text-gray-900\">{service.name}</span>\r\n                                    <span className=\"text-sm text-gray-500 ml-2\">({formatCurrency(service.price)})</span>\r\n                                </div>\r\n                            </label>\r\n                        ))}\r\n                    </div>\r\n                </div>\r\n                {formData.serviceIds.length > 0 && (\r\n                    <div className=\"mt-2 text-sm text-gray-600 bg-gray-50 rounded-xl p-3\">\r\n                        <strong>Total:</strong> {formatCurrency(\r\n                            services\r\n                                .filter(s => formData.serviceIds.includes(s.id))\r\n                                .reduce((sum, s) => sum + s.price, 0)\r\n                        )}\r\n                    </div>\r\n                )}\r\n            </div>\r\n\r\n            <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">Observa├º├Áes</label>\r\n                <input\r\n                    type=\"text\"\r\n                    placeholder=\"Observa├º├Áes adicionais\"\r\n                    value={formData.notes}\r\n                    onChange={(e) => setFormData({ ...formData, notes: e.target.value })}\r\n                    className=\"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-pink-500 focus:border-transparent outline-none\"\r\n                />\r\n            </div>\r\n\r\n            <div className=\"flex gap-3 pt-4\">\r\n                <button\r\n                    type=\"submit\"\r\n                    disabled={formData.serviceIds.length === 0 || isSpecificConflict || !formData.staffId}\r\n                    className=\"flex-1 py-3 gradient-bg text-white font-semibold rounded-xl hover:opacity-90 transition-all disabled:opacity-50 disabled:cursor-not-allowed shadow-md\"\r\n                >\r\n                    {editingId ? 'Salvar Altera├º├Áes' : 'Agendar'}\r\n                </button>\r\n                <button\r\n                    type=\"button\"\r\n                    onClick={onCancel}\r\n                    className=\"px-6 py-3 border border-gray-200 rounded-xl hover:bg-gray-50 transition-all text-gray-600 font-medium\"\r\n                >\r\n                    Cancelar\r\n                </button>\r\n            </div>\r\n        </form>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Dev\\workspace\\src\\sections\\appointments\\AppointmentHeader.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Dev\\workspace\\src\\sections\\appointments\\DateSelector.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Dev\\workspace\\src\\sections\\appointments\\PaymentForm.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Dev\\workspace\\src\\types\\index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Dev\\workspace\\src\\utils\\birthday.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Dev\\workspace\\src\\utils\\currency.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Dev\\workspace\\src\\utils\\date.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Dev\\workspace\\src\\utils\\date.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Dev\\workspace\\src\\utils\\format.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Dev\\workspace\\src\\utils\\format.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Dev\\workspace\\src\\utils\\haptics.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Dev\\workspace\\src\\utils\\validation.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Dev\\workspace\\src\\utils\\viacep.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Dev\\workspace\\src\\vite-env.d.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Dev\\workspace\\vite.config.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Dev\\workspace\\vitest.config.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]}]
